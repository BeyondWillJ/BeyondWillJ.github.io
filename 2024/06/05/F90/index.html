<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>FORTRAN90 程序设计基础 大纲 | BNWJ</title><meta name="author" content="BN,BeyondWillJ@163.com"><meta name="copyright" content="BN"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="FORTRAN90程序设计的一个总纲">
<meta property="og:type" content="article">
<meta property="og:title" content="FORTRAN90 程序设计基础 大纲">
<meta property="og:url" content="https://www.beyondwj.cc/2024/06/05/F90/index.html">
<meta property="og:site_name" content="BNWJ">
<meta property="og:description" content="FORTRAN90程序设计的一个总纲">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://www.beyondwj.cc/img/seele_bigback.png">
<meta property="article:published_time" content="2024-06-04T16:00:00.000Z">
<meta property="article:modified_time" content="2024-07-28T14:36:57.210Z">
<meta property="article:author" content="BN">
<meta property="article:tag" content="FORTRAN">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://www.beyondwj.cc/img/seele_bigback.png"><link rel="shortcut icon" href="/img/seele.png"><link rel="canonical" href="https://www.beyondwj.cc/2024/06/05/F90/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        if (name && globalFn[key][name]) return
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: false,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'FORTRAN90 程序设计基础 大纲',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-07-28 22:36:57'
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="web_bg" style="background-image: url(/img/希儿12.jpg);"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/seele.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">7</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">7</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-book"></i><span> 文章</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/categories/%E4%BB%A3%E7%A0%81%E5%BA%93"><i class="fa-fw fas fa-code"></i><span> 代码库</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 链接</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/img/seele_bigback.png);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><img class="site-icon" src="/img/seele.png" alt="Logo"><span class="site-name">BNWJ</span></a><a class="nav-page-title" href="/"><span class="site-name">FORTRAN90 程序设计基础 大纲</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-book"></i><span> 文章</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/categories/%E4%BB%A3%E7%A0%81%E5%BA%93"><i class="fa-fw fas fa-code"></i><span> 代码库</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 链接</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">FORTRAN90 程序设计基础 大纲</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-06-04T16:00:00.000Z" title="发表于 2024-06-05 00:00:00">2024-06-05</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-07-28T14:36:57.210Z" title="更新于 2024-07-28 22:36:57">2024-07-28</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/FORTRAN%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/">FORTRAN程序设计</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">4k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>18分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p><strong><font size="7">FORTRAN90 程序设计基础 大纲</font></strong></p>
<!-- toc -->
<h1 id="基本数据类型I"><a href="#基本数据类型I" class="headerlink" title="基本数据类型I"></a>基本数据类型I</h1><p><strong><font color="red">整型、实型、复型、字符型和逻辑型</font></strong></p>
<p>变量可以<strong>赋初值</strong>、说明<strong>种别</strong>、说明<strong>属性</strong>。 </p>
<h1 id="整型-integer"><a href="#整型-integer" class="headerlink" title="整型 integer"></a>整型 <font color="red">integer</font></h1><p>integer的<strong>种别</strong>有三种。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">kind</th>
<th style="text-align:center">Bytes=8bits</th>
<th style="text-align:center">range</th>
<th style="text-align:center">range</th>
<th style="text-align:center">type</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">1B=8b</td>
<td style="text-align:center">-128~127</td>
<td style="text-align:center">-2^7^~2^7^-1</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">2B=16b</td>
<td style="text-align:center">-32768~32767</td>
<td style="text-align:center">-2^15^~2^15^-1</td>
<td style="text-align:center">short</td>
</tr>
<tr>
<td style="text-align:center">4</td>
<td style="text-align:center">4B=32b</td>
<td style="text-align:center">-2147483648~2147483647</td>
<td style="text-align:center">-2^32^~2^32^-1</td>
<td style="text-align:center">long</td>
</tr>
</tbody>
</table>
</div>
<p>默认<code>kind=4</code></p>
<h2 id="实型-real"><a href="#实型-real" class="headerlink" title="实型 real"></a>实型 <font color="red">real</font></h2><p><strong>小数形式 指数形式 小数点必须有</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">100.0 .5 5.</span><br><span class="line">87.6e-2=0.876</span><br></pre></td></tr></table></figure>
<p>计算机在保存实数时，会先把它转成<strong>科学计数法</strong></p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">kind</th>
<th style="text-align:center">Bytes=8bits</th>
<th style="text-align:center">range</th>
<th style="text-align:center">range</th>
<th style="text-align:center">type</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">4</td>
<td style="text-align:center">4B</td>
<td style="text-align:center">3.4*10^38^,1.18*10^-38^</td>
<td style="text-align:center">6~7位</td>
<td style="text-align:center">Single</td>
</tr>
<tr>
<td style="text-align:center">8</td>
<td style="text-align:center">8B</td>
<td style="text-align:center">1.79*10^308^,2.23*10^-308^</td>
<td style="text-align:center">15~16位</td>
<td style="text-align:center">Double</td>
</tr>
</tbody>
</table>
</div>
<p>默认占用<strong>4Bytes</strong>的单精度实数。</p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">integer</span>,<span class="keyword">parameter</span>::long=<span class="built_in">selected_real_kind</span>(<span class="number">8</span>,<span class="number">88</span>)</span><br></pre></td></tr></table></figure>
<p>实数具有误差，因此表示相等应写成：<code>if (abs(A-10.2)&lt;1e-6)</code>。</p>
<h2 id="复型-complex"><a href="#复型-complex" class="headerlink" title="复型 complex"></a>复型 <font color="red">complex</font></h2><h2 id="字符型-character"><a href="#字符型-character" class="headerlink" title="字符型 character"></a>字符型 <font color="red">character</font></h2><p>记录一个英文字符需要一个字节，一个汉字为两个字节。<br><code>&#39;&#39;</code>内的<code>&#39;</code>字符需要写成<code>&#39;&#39;</code>，即<code>&#39;I&#39;&#39; m a student.&#39;</code></p>
<h2 id="ASCII"><a href="#ASCII" class="headerlink" title="ASCII"></a>ASCII</h2><p>空格，数字<code>0~9</code>，大写字母<code>A~Z</code>，小写字母<code>a~z</code></p>
<p>快速求十进制数的各进制转换python代码：</p>
<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">f</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="built_in">print</span>(x,<span class="built_in">bin</span>(x),<span class="built_in">oct</span>(x),<span class="built_in">hex</span>(x))</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> (<span class="number">32</span>,<span class="number">48</span>,<span class="number">57</span>,<span class="number">65</span>,<span class="number">90</span>,<span class="number">97</span>,<span class="number">122</span>): f(i)</span><br></pre></td></tr></table></figure>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">char</th>
<th style="text-align:center">dec</th>
<th style="text-align:center">bin</th>
<th style="text-align:center">oct</th>
<th style="text-align:center">hex</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">space</td>
<td style="text-align:center">32</td>
<td style="text-align:center">0b100000</td>
<td style="text-align:center">0o40</td>
<td style="text-align:center">0x20</td>
</tr>
<tr>
<td style="text-align:center">0</td>
<td style="text-align:center">48</td>
<td style="text-align:center">0b110000</td>
<td style="text-align:center">0o60</td>
<td style="text-align:center">0x30</td>
</tr>
<tr>
<td style="text-align:center">9</td>
<td style="text-align:center">57</td>
<td style="text-align:center">0b111001</td>
<td style="text-align:center">0o71</td>
<td style="text-align:center">0x39</td>
</tr>
<tr>
<td style="text-align:center">A</td>
<td style="text-align:center">65</td>
<td style="text-align:center">0b1000001</td>
<td style="text-align:center">0o101</td>
<td style="text-align:center">0x41</td>
</tr>
<tr>
<td style="text-align:center">Z</td>
<td style="text-align:center">90</td>
<td style="text-align:center">0b1011010</td>
<td style="text-align:center">0o132</td>
<td style="text-align:center">0x5a</td>
</tr>
<tr>
<td style="text-align:center">a</td>
<td style="text-align:center">97</td>
<td style="text-align:center">0b1100001</td>
<td style="text-align:center">0o141</td>
<td style="text-align:center">0x61</td>
</tr>
<tr>
<td style="text-align:center">z</td>
<td style="text-align:center">122</td>
<td style="text-align:center">0b1111010</td>
<td style="text-align:center">0o172</td>
<td style="text-align:center">0x7a</td>
</tr>
</tbody>
</table>
</div>
<p><strong>字符子串</strong></p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">character</span>(len=<span class="number">80</span>)::row</span><br><span class="line">row(i:i)</span><br><span class="line">row(:i)	<span class="comment">!(1:i)</span></span><br><span class="line">row(i:)	<span class="comment">!(i:80)</span></span><br><span class="line">row(:)	<span class="comment">!(1:80)</span></span><br></pre></td></tr></table></figure>
<h1 id="基本数据类型II"><a href="#基本数据类型II" class="headerlink" title="基本数据类型II"></a>基本数据类型II</h1><h2 id="常量-parameter"><a href="#常量-parameter" class="headerlink" title="常量 parameter"></a>常量 <font color="red">parameter</font></h2><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">real</span>::pi</span><br><span class="line"><span class="keyword">parameter</span>(pi=<span class="number">3.14159</span>)</span><br></pre></td></tr></table></figure>
<p>或者</p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">real</span>,<span class="keyword">parameter</span>::pi=<span class="number">3.14159</span></span><br></pre></td></tr></table></figure>
<h2 id="派生-type"><a href="#派生-type" class="headerlink" title="派生 type"></a>派生 <font color="red">type</font></h2><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">program</span></span> main</span><br><span class="line">    <span class="keyword">implicit</span> <span class="keyword">none</span></span><br><span class="line">    <span class="keyword">type</span> student</span><br><span class="line">        <span class="keyword">character</span>(len=<span class="number">20</span>)::department</span><br><span class="line">        <span class="keyword">character</span>(len=<span class="number">10</span>)::<span class="keyword">class</span></span><br><span class="line">        <span class="keyword">character</span>(len=<span class="number">15</span>)::<span class="keyword">name</span></span><br><span class="line">        <span class="keyword">integer</span>::<span class="keyword">number</span></span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">type</span> student</span><br><span class="line">    <span class="keyword">type</span>(student)::person</span><br><span class="line">    person=student(<span class="string">&quot;computer&quot;</span>,<span class="string">&quot;92_2&quot;</span>,<span class="string">&quot;lilin&quot;</span>,<span class="number">21</span>)</span><br><span class="line">    <span class="built_in">write</span>(*,*) person%<span class="keyword">class</span>,person%<span class="keyword">name</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h2 id="数组-dimension"><a href="#数组-dimension" class="headerlink" title="数组 dimension"></a>数组 <font color="red">dimension</font></h2><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">integer</span>,<span class="keyword">dimension</span>(<span class="number">1</span>:<span class="number">50</span>)::X</span><br><span class="line"><span class="keyword">integer</span>,<span class="keyword">dimension</span>(<span class="number">5</span>,<span class="number">3</span>)::X</span><br></pre></td></tr></table></figure>
<h1 id="基本语句"><a href="#基本语句" class="headerlink" title="基本语句"></a>基本语句</h1><p>注释号是<code>!</code>，位于行中。</p>
<h2 id="类型声明"><a href="#类型声明" class="headerlink" title="类型声明"></a>类型声明</h2><p><strong>抑制隐式声明</strong>：在主程序开头需要加入该语句，避免获得意料之外的结果。</p>
<figure class="highlight f90"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">impilcit <span class="keyword">none</span></span><br></pre></td></tr></table></figure>
<p>此时如果有<strong>未声明的变量</strong>使用，程序会出错。否则使用<strong>I-N规则</strong>，以I-N开头的为整型，其余为实型。</p>
<h2 id="种别"><a href="#种别" class="headerlink" title="种别"></a>种别</h2><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">type</th>
<th style="text-align:center">kind</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">integer</td>
<td style="text-align:center">1,2,<strong>4</strong>(long)</td>
</tr>
<tr>
<td style="text-align:center">real</td>
<td style="text-align:center"><strong>4</strong>(single),8(double)</td>
</tr>
<tr>
<td style="text-align:center">logical</td>
<td style="text-align:center">1,2,<strong>4</strong></td>
</tr>
<tr>
<td style="text-align:center">complex</td>
<td style="text-align:center"><strong>4</strong>(single),8(double)</td>
</tr>
<tr>
<td style="text-align:center">character</td>
<td style="text-align:center"><strong>1</strong></td>
</tr>
</tbody>
</table>
</div>
<p>测试整型种别范围</p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">program</span></span> int_kind</span><br><span class="line">    <span class="keyword">implicit</span> <span class="keyword">none</span></span><br><span class="line">    <span class="keyword">integer</span>::i</span><br><span class="line">    <span class="built_in">print</span> *,<span class="keyword">kind</span>(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">do</span> i=<span class="number">1</span>,<span class="number">10</span></span><br><span class="line">        <span class="built_in">print</span> *,i,<span class="built_in">selected_int_kind</span>(i)</span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">do</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"> 4</span><br><span class="line"> 1           1</span><br><span class="line"> 2           1</span><br><span class="line"> 3           2</span><br><span class="line"> 4           2</span><br><span class="line"> 5           4</span><br><span class="line"> 6           4</span><br><span class="line"> 7           4</span><br><span class="line"> 8           4</span><br><span class="line"> 9           4</span><br><span class="line">10           8</span><br></pre></td></tr></table></figure>
<h2 id="算术表达式与赋值"><a href="#算术表达式与赋值" class="headerlink" title="算术表达式与赋值"></a>算术表达式与赋值</h2><h2 id="内在函数"><a href="#内在函数" class="headerlink" title="内在函数"></a>内在函数</h2><p><strong>基本函数、转换函数、查询函数</strong></p>
<h2 id="算术运算"><a href="#算术运算" class="headerlink" title="算术运算"></a>算术运算</h2><p>乘方<code>**</code>（右向左）<br>乘除<code>*/</code><br>加减<code>+-</code></p>
<p><strong>注意</strong></p>
<ol>
<li><p>三角函数(sin cos tan) 自变量单位为<strong>弧度</strong></p>
<script type="math/tex; mode=display">
 r=\frac{d}{180}\pi</script></li>
<li><p>sin log exp sqrt 要求自变量是<strong>实型</strong>，不能是整型</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x27;x&#x27; argument of &#x27;sin&#x27; intrinsic at (1) must be REAL or COMPLEX</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>整型相除</strong>是整除，不会产生浮点数</p>
 <figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">program</span></span> main</span><br><span class="line">    <span class="keyword">implicit</span> <span class="keyword">none</span></span><br><span class="line">    <span class="keyword">integer</span>::a=<span class="number">3</span>,b=<span class="number">4</span></span><br><span class="line">    <span class="built_in">print</span> *,a/b</span><br><span class="line"><span class="keyword">end</span> <span class="function"><span class="keyword">program</span></span> main</span><br><span class="line"><span class="comment">!0</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>例如：</p>
<script type="math/tex; mode=display">
\frac{(\sin 4 + \cos 10 \degree )e^{2.5}}{\sqrt{2} + \abs{ax} + \ln(3 \times 5)}</script><p>是<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(sin(4.0)+cos(10*3.14/180))*exp(2.5)/(sqrt(2.0)+abs(a*x)+log(3.0*5))</span><br></pre></td></tr></table></figure></p>
<p><strong>类型的自动转换</strong></p>
<p>整型→实型→双精度→复型<br><code>8/5+2.0*5/2=6.0</code><br><code>3.1_4+4.5_8=7.6_8</code></p>
<h2 id="关系表达式与逻辑表达式"><a href="#关系表达式与逻辑表达式" class="headerlink" title="关系表达式与逻辑表达式"></a>关系表达式与逻辑表达式</h2><p><strong>优先级</strong>：括号→算术→关系→逻辑</p>
<p>算术<code>** *,/ +,-</code><br>关系<code>&gt;,&lt;,&gt;=,&lt;=,==,/=</code><br>逻辑<code>.not.,.and.,.or.,.eqv.,neqv.</code>比较逻辑值</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">A=1.5,B=2.0,C=1.2,D=7.5,X=3.0,Y=5.0,L1=.true.</span><br><span class="line">A&gt;2.8*B.and.X&gt;=Y.or.L1.and..not.(3.6-C)*2&gt;=D/2.5</span><br></pre></td></tr></table></figure>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">program</span></span> main</span><br><span class="line">    <span class="keyword">implicit</span> <span class="keyword">none</span></span><br><span class="line">    <span class="keyword">real</span>::A=<span class="number">1.5</span>,B=<span class="number">2.0</span>,C=<span class="number">1.2</span>,D=<span class="number">7.5</span>,X=<span class="number">3.0</span>,Y=<span class="number">5.0</span></span><br><span class="line">    <span class="keyword">logical</span>::L1=<span class="literal">.true.</span></span><br><span class="line">    <span class="built_in">print</span> *,A&gt;<span class="number">2.8</span>*B<span class="keyword">.and.</span>X&gt;=Y<span class="keyword">.or.</span>L1<span class="keyword">.and.</span><span class="keyword">.not.</span>(<span class="number">3.6</span>-C)*<span class="number">2</span>&gt;=D/<span class="number">2.5</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">! F</span></span><br></pre></td></tr></table></figure>
<h2 id="输入与输出"><a href="#输入与输出" class="headerlink" title="输入与输出"></a>输入与输出</h2><h2 id="表控输入"><a href="#表控输入" class="headerlink" title="表控输入"></a>表控输入</h2><p><code>read</code>语句（数据→内存）<br>可以留一个<code>*</code>表示表控格式并省略部件号</p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">read (*,*) 输入表</span><br><span class="line">read *, 输入表</span><br><span class="line"></span><br><span class="line">read (&lt;设备号&gt;,&lt;格式说明&gt;) &lt;输入表&gt;</span><br><span class="line">read &lt;格式说明&gt;,&lt;输入表&gt;	<span class="comment">!部件号可省略</span></span><br></pre></td></tr></table></figure>
<p><strong><font color="red">输入语句的七条规则</font></strong></p>
<ol>
<li><p><strong>分隔符</strong>是空格或者<code>,</code>，<strong>输入类型需要匹配</strong>。<br>整型：舍去小数<br>实型：可以接受整数<br>复型：<code>(1,2)</code><br>字符型：<br>逻辑：以<code>T</code>或<code>F</code>开头。</p>
</li>
<li><p>输入的数据必须是常数，<strong>不能是变量和表达式</strong>。</p>
</li>
<li><p><strong>输入数据个数</strong>：不得少于变量的个数、可分行输入、多余的数据不起作用、每个read必须从一个新的行输入数据。</p>
</li>
<li><p><strong>空格可以多个</strong>，<code>/</code>表示输入结束，<code>*</code>前连接<strong>重复因子</strong><code>r</code>。<strong>可以使若干编辑符一起重复。</strong></p>
</li>
<li><p><strong>多个read语句</strong>，每个read必须从新的行开始输入。</p>
</li>
</ol>
<h2 id="表控输出"><a href="#表控输出" class="headerlink" title="表控输出"></a>表控输出</h2><p><code>print</code>输出到显示器（因此省略设备号，只留一个<code>*</code>格式说明）<br><code>write</code>输出到任何设备（因此需给定设备号，<code>(*,*)</code>）</p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span> *, 输出表</span><br><span class="line"><span class="built_in">write</span> (*,*) 输出表</span><br><span class="line"></span><br><span class="line"><span class="built_in">write</span> (&lt;设备号&gt;,&lt;格式说明&gt;) &lt;输出表&gt;</span><br><span class="line"><span class="built_in">print</span> &lt;格式说明&gt;,&lt;输出表&gt;</span><br></pre></td></tr></table></figure>
<ol>
<li>固定的<strong>输出宽度</strong>。</li>
<li><strong>类型</strong>：<br> 复型：带<code>()</code>输出<br> 逻辑型：输出<code>T</code>或<code>F</code><br> 字符型：左对齐</li>
<li>一行显示不下会<strong>换行</strong></li>
<li><strong>多个print语句</strong>，每个开始输出一个新的记录</li>
</ol>
<h2 id="格式化输入输出"><a href="#格式化输入输出" class="headerlink" title="格式化输入输出"></a>格式化输入输出</h2><h3 id="整型编辑符-r-Iw-m"><a href="#整型编辑符-r-Iw-m" class="headerlink" title="整型编辑符[r]Iw[.m]"></a>整型编辑符<code>[r]Iw[.m]</code></h3><p><code>w</code>总宽度，<code>m</code>数字位数（$m\le w$，负数$m&lt;w$），<code>r</code>重复系数</p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">program</span></span> main</span><br><span class="line">    <span class="keyword">implicit</span> <span class="keyword">none</span></span><br><span class="line">    <span class="keyword">integer</span>::a=<span class="number">3</span>,b=<span class="number">4</span>,c=-<span class="number">50</span></span><br><span class="line">    <span class="built_in">print</span> <span class="string">&quot;(3I6.4)&quot;</span>,a,b,c</span><br><span class="line"><span class="keyword">end</span> <span class="function"><span class="keyword">program</span></span> main</span><br><span class="line"></span><br><span class="line"><span class="comment">! __0003__0004_-0050</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">program</span></span> main</span><br><span class="line">    <span class="keyword">implicit</span> <span class="keyword">none</span></span><br><span class="line">    <span class="keyword">integer</span>::a=<span class="number">300</span>,b=<span class="number">400</span>,c=-<span class="number">500</span></span><br><span class="line">    <span class="built_in">print</span> <span class="string">&quot;(3I3.2)&quot;</span>,a,b,c</span><br><span class="line"><span class="keyword">end</span> <span class="function"><span class="keyword">program</span></span> main</span><br><span class="line"></span><br><span class="line"><span class="comment">! 300400***</span></span><br></pre></td></tr></table></figure>
<p><strong>负数的符号也包含在字段宽度内</strong>，如果应输出的列数<strong>超过了规定的字段宽度</strong>，则不输出有效数据，以w个*填充。</p>
<p>如果<strong>控制符不够</strong>，则换行。</p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">program</span></span> main</span><br><span class="line">    <span class="keyword">implicit</span> <span class="keyword">none</span></span><br><span class="line">    <span class="keyword">integer</span>::a=<span class="number">3</span>,b=<span class="number">4</span>,c=-<span class="number">50</span></span><br><span class="line">    <span class="built_in">print</span> <span class="string">&quot;(2I6.4)&quot;</span>,a,b,c</span><br><span class="line"><span class="keyword">end</span> <span class="function"><span class="keyword">program</span></span> main</span><br><span class="line"><span class="comment">!   0003  0004</span></span><br><span class="line"><span class="comment">!   -0050</span></span><br></pre></td></tr></table></figure>
<p><strong>输入</strong>与输出格式相同。<code>BN</code>忽略末尾空格，<code>BZ</code>视末尾空格为0。</p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">program</span></span> main</span><br><span class="line">    <span class="keyword">implicit</span> <span class="keyword">none</span></span><br><span class="line">    <span class="keyword">integer</span>::a</span><br><span class="line">    read <span class="string">&quot;(BZ,I4)&quot;</span>,a</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&quot;(I5)&quot;</span>,a</span><br><span class="line">    <span class="comment">! 543_</span></span><br><span class="line">    <span class="comment">! 5430</span></span><br><span class="line"><span class="keyword">end</span> <span class="function"><span class="keyword">program</span></span> main</span><br></pre></td></tr></table></figure>
<h3 id="实型编辑符-r-Fw-d"><a href="#实型编辑符-r-Fw-d" class="headerlink" title="实型编辑符[r]Fw.d"></a>实型编辑符<code>[r]Fw.d</code></h3><p><code>[r]Ew.d[Ee]</code>按指数形式，<code>[r]Gw.d</code>根据数据选择。<code>w</code>包括符号和小数点， <code>d</code>小数位宽度（四舍五入）。若数据小于w位，则左边补空格。<br>当实型数值小于0.0（负数）时，则$w\ge n+d+2$；当实型数值大于或等于0.0时，则$w\ge n+d+1$。</p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">program</span></span> main</span><br><span class="line">    <span class="keyword">implicit</span> <span class="keyword">none</span></span><br><span class="line">    <span class="keyword">real</span>::a=-<span class="number">378.456</span></span><br><span class="line">    <span class="built_in">print</span> <span class="string">&quot;(F8.2)&quot;</span>,a</span><br><span class="line">    <span class="comment">! -378.46</span></span><br><span class="line"><span class="keyword">end</span> <span class="function"><span class="keyword">program</span></span> main</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">program</span></span> main</span><br><span class="line">    <span class="keyword">implicit</span> <span class="keyword">none</span></span><br><span class="line">    <span class="keyword">real</span>::a=<span class="number">2456.78</span></span><br><span class="line">    <span class="built_in">print</span> *,a</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&quot;(F20.15)&quot;</span>,a</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&quot;(E9.3,E12.3)&quot;</span>,a,a</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&quot;(E16.10)&quot;</span>,a</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&quot;(E21.15)&quot;</span>,a</span><br><span class="line"><span class="keyword">end</span> <span class="function"><span class="keyword">program</span></span> main</span><br><span class="line"><span class="comment">!    2456.78003</span></span><br><span class="line"><span class="comment">! 2456.780029296875000</span></span><br><span class="line"><span class="comment">! 0.246E+04   0.246E+04</span></span><br><span class="line"><span class="comment">! 0.2456780029E+04</span></span><br><span class="line"><span class="comment">! 0.245678002929688E+04</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">program</span></span> main</span><br><span class="line">    <span class="keyword">implicit</span> <span class="keyword">none</span></span><br><span class="line">    <span class="keyword">real</span>::a=<span class="number">2456.78</span></span><br><span class="line">    <span class="built_in">print</span> <span class="string">&quot;(E10.3E3)&quot;</span>,a</span><br><span class="line">    <span class="comment">! 0.246E+004</span></span><br><span class="line"><span class="keyword">end</span> <span class="function"><span class="keyword">program</span></span> main</span><br></pre></td></tr></table></figure>
<p>避免大数印错、小数印丢</p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">program</span></span> main</span><br><span class="line">    <span class="keyword">implicit</span> <span class="keyword">none</span></span><br><span class="line">    <span class="keyword">real</span>::a=<span class="number">2456.78</span>,b=<span class="number">0.0002345</span></span><br><span class="line">    <span class="built_in">print</span> <span class="string">&quot;(E2.3E1)&quot;</span>,a</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&quot;(F5.3)&quot;</span>,b</span><br><span class="line">    <span class="comment">! **</span></span><br><span class="line">    <span class="comment">! 0.000</span></span><br><span class="line"><span class="keyword">end</span> <span class="function"><span class="keyword">program</span></span> main</span><br></pre></td></tr></table></figure>
<p>使用<strong>指数形式</strong>，不必事先估计数的大小，能容纳任意大小的数据。正数$w \ge d+6$，负数$w \ge d+7$。</p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">! 数符+0+小数点+小数部分+E+符号+指数</span></span><br><span class="line"><span class="comment">! 一般格式E16.7,便于阅读</span></span><br><span class="line"><span class="function"><span class="keyword">program</span></span> main</span><br><span class="line">    <span class="keyword">implicit</span> <span class="keyword">none</span></span><br><span class="line">    <span class="keyword">real</span>::a=<span class="number">0</span></span><br><span class="line">    <span class="built_in">print</span> <span class="string">&quot;(E6.1E1)&quot;</span>,a</span><br><span class="line">    <span class="comment">! 0.0E+0</span></span><br><span class="line">    <span class="built_in">print</span> <span class="string">&quot;(E7.1)&quot;</span>,a</span><br><span class="line">    <span class="comment">! 0.0E+00</span></span><br><span class="line"><span class="keyword">end</span> <span class="function"><span class="keyword">program</span></span> main</span><br></pre></td></tr></table></figure>
<p>使用行代码</p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">program</span></span> main</span><br><span class="line">    <span class="keyword">implicit</span> <span class="keyword">none</span></span><br><span class="line">    <span class="keyword">real</span>::X=-<span class="number">84.31</span>,Y=<span class="number">3.141592</span>,Z=<span class="number">0.0187</span></span><br><span class="line">    <span class="keyword">character</span>(<span class="number">30</span>)::ml</span><br><span class="line">    <span class="built_in">print</span> <span class="number">2</span>,X,Y,Z</span><br><span class="line">    <span class="number">2</span> <span class="keyword">format</span> (E10<span class="number">.3</span>,E13<span class="number">.6</span>,E15<span class="number">.6</span>)</span><br><span class="line">    <span class="comment">! -0.843E+02 0.314159E+01   0.187000E-01</span></span><br><span class="line">    ml=<span class="string">&quot;(E10.3,E13.6,E15.6)&quot;</span></span><br><span class="line">    <span class="built_in">print</span> ml,X,Y,Z</span><br><span class="line">    <span class="comment">! -0.843E+02 0.314159E+01   0.187000E-01</span></span><br><span class="line"><span class="keyword">end</span> <span class="function"><span class="keyword">program</span></span> main</span><br></pre></td></tr></table></figure>
<h3 id="其他编辑符"><a href="#其他编辑符" class="headerlink" title="其他编辑符"></a>其他编辑符</h3><p><code>X</code>输出空格，输入跳过<br><code>H</code>描述字符串（或直接写）<br><code>/</code>换行<br><code>:</code>变量输出结束阻塞后续输出</p>
<p><strong>练习</strong> 定义$4$个数据，2个整型：$12$、$115$；2个实型：$45.6$、$123.4$。用表控格式读入$4$个数字并赋值，求取每个数据的以$10$为底的对数和平方根，并输出原数据和结果（即$3$组，每组$4$​个数字）。</p>
<p><strong>要求</strong></p>
<ul>
<li>每组数据输出前，先输出说明文字，例如”4个原数据为：“或“对应平方根为：”</li>
<li>数据有格式输出，每4个数字按两行输出，每行2个数字。<ul>
<li>第一行：2个整型，每个数字用6位字符宽输出，数字中间空2格</li>
<li>第二行：2格实型，第一个字用F编辑符，6位字符宽输出，小数位2位。第二个字用E编辑符，12位字符宽输出，小数位2位，指数位3位。</li>
</ul>
</li>
</ul>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">program</span></span> main</span><br><span class="line">    <span class="keyword">implicit</span> <span class="keyword">none</span></span><br><span class="line">    <span class="keyword">integer</span>::a,b</span><br><span class="line">    <span class="keyword">real</span>::c,d</span><br><span class="line">    <span class="comment">! 12 115 45.6 123.4</span></span><br><span class="line">    read *,a,b,c,d</span><br><span class="line">    <span class="built_in">print</span> <span class="number">1</span>, <span class="string">&#x27;四个原数据为&#x27;</span>,a,b,c,d</span><br><span class="line">    <span class="built_in">print</span> <span class="number">1</span>, <span class="string">&#x27;以10为底的对数为&#x27;</span>,<span class="built_in">int</span>(<span class="built_in">log10</span>(<span class="keyword">real</span>(a))),<span class="built_in">int</span>(<span class="built_in">log10</span>(<span class="keyword">real</span>(b))),<span class="built_in">log10</span>(c),<span class="built_in">log10</span>(d)</span><br><span class="line">    <span class="built_in">print</span> <span class="number">1</span>, <span class="string">&#x27;平方根为&#x27;</span>,<span class="built_in">int</span>(<span class="built_in">sqrt</span>(<span class="keyword">real</span>(a))),<span class="built_in">int</span>(<span class="built_in">sqrt</span>(<span class="keyword">real</span>(b))),<span class="built_in">sqrt</span>(c),<span class="built_in">sqrt</span>(d)</span><br><span class="line">    <span class="number">1</span> <span class="keyword">format</span> (A,/,I6,<span class="number">2</span>X,I6,/,F6<span class="number">.2</span>,<span class="number">2</span>X,E12<span class="number">.2E3</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">! encoding=GB2312</span></span><br></pre></td></tr></table></figure>
<p><strong>结果</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">12 115 45.6 123.4</span><br><span class="line">四个原数据为</span><br><span class="line">    12     115</span><br><span class="line"> 45.60     0.12E+003</span><br><span class="line">以10为底的对数为</span><br><span class="line">     1       2</span><br><span class="line">  1.66     0.21E+001</span><br><span class="line">平方根为</span><br><span class="line">     3      10</span><br><span class="line">  6.75     0.11E+002</span><br></pre></td></tr></table></figure>
<h1 id="基本程序结构"><a href="#基本程序结构" class="headerlink" title="基本程序结构"></a>基本程序结构</h1><h2 id="程序单元"><a href="#程序单元" class="headerlink" title="程序单元"></a>程序单元</h2><p><strong><font color="red">主程序、子程序、模块</font></strong></p>
<h2 id="主程序program"><a href="#主程序program" class="headerlink" title="主程序program"></a>主程序<code>program</code></h2><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">program</span></span> main</span><br><span class="line">	<span class="keyword">implicit</span> <span class="keyword">none</span></span><br><span class="line">	<span class="built_in">print</span> *,<span class="string">&quot;Hello&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p><strong>例</strong> 华氏度转摄氏度</p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">program</span></span> H_to_C</span><br><span class="line">    <span class="keyword">implicit</span> <span class="keyword">none</span></span><br><span class="line">    <span class="keyword">real</span>::TC,TH</span><br><span class="line">    read *,TH</span><br><span class="line">    TC = <span class="number">5</span>*(TH-<span class="number">32</span>)/<span class="number">9</span></span><br><span class="line">    <span class="built_in">print</span> *,TH,TC</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p><strong>主程序格式</strong></p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">program</span></span> main    <span class="comment">!主程序main开始</span></span><br><span class="line">    <span class="keyword">implicit</span> <span class="keyword">none</span>   <span class="comment">! 声明部分</span></span><br><span class="line">    <span class="keyword">real</span>,<span class="keyword">dimension</span>(<span class="number">10</span>,<span class="number">10</span>)::a,b</span><br><span class="line">    a=<span class="number">1.0</span>   <span class="comment">!执行部分</span></span><br><span class="line">    b=a*<span class="number">3</span></span><br><span class="line">    <span class="keyword">call</span> find</span><br><span class="line">    <span class="comment">!...</span></span><br><span class="line">    <span class="keyword">contains</span></span><br><span class="line">         <span class="function"><span class="keyword">subroutine</span></span> find    <span class="comment">!内部过程（子例子程序）</span></span><br><span class="line">            <span class="comment">!...</span></span><br><span class="line">         <span class="keyword">end</span> <span class="function"><span class="keyword">subroutine</span></span> find</span><br><span class="line">  <span class="keyword">end</span> <span class="function"><span class="keyword">program</span></span> main</span><br></pre></td></tr></table></figure>
<p><strong>练习</strong> 有一长5m，宽3m的长方形铁皮，在四角对称挖去了四个半径为0.5m的圆洞，现需要对这块铁皮镀一层铜（单面），铜的单价为每平方米50元，计算镀铜的费用，并输出。（要求：在程序中铜的单价和圆周率用<strong>常数声明</strong>方法声明；铁皮的长、宽和圆洞的半径大小从<strong>键盘输入</strong>）</p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">program</span></span> main</span><br><span class="line">    <span class="keyword">implicit</span> <span class="keyword">none</span></span><br><span class="line">    <span class="keyword">real</span>,<span class="keyword">parameter</span>::pi=<span class="number">3.14</span></span><br><span class="line">    <span class="keyword">integer</span>,<span class="keyword">parameter</span>::m=<span class="number">50</span></span><br><span class="line">    <span class="keyword">integer</span>::a,b</span><br><span class="line">    <span class="keyword">real</span>::r,ans</span><br><span class="line">    read *,a,b,r</span><br><span class="line">    ans=m*(a*b-<span class="number">4</span>*pi*r*r)</span><br><span class="line">    <span class="built_in">print</span> *,ans</span><br><span class="line"><span class="keyword">end</span> <span class="function"><span class="keyword">program</span></span> main</span><br><span class="line"></span><br><span class="line"><span class="comment">! 5 3 0.5</span></span><br><span class="line"><span class="comment">! 593.000000</span></span><br></pre></td></tr></table></figure>
<h2 id="子程序"><a href="#子程序" class="headerlink" title="子程序"></a>子程序</h2><p>函数子程序、子例子程序</p>
<h3 id="函数子程序function"><a href="#函数子程序function" class="headerlink" title="函数子程序function"></a>函数子程序<code>function</code></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[recursive] function f(x1,x2) result(y)</span><br><span class="line">    implicit none</span><br><span class="line">end [function [f]]</span><br><span class="line"></span><br><span class="line">f(x1,x2)</span><br></pre></td></tr></table></figure>
<p><code>recursive</code>函数递归 虚元表 结果名</p>
<p>必须有且仅有一个返回值</p>
<p>所有变量均需声明 <strong>主程序中需要声明被调函数的类型</strong><br>子程序中出现的变量在主程序中赋初值无效，否则无法释放变量<br><strong>子程序中的变量声明需要单独赋值</strong></p>
<p><strong>例</strong> 编程求$\sum_{i=4}^{8} i!$，用函数子程序实现。</p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span></span> factor(N) result(fac_result)</span><br><span class="line">    <span class="keyword">implicit</span> <span class="keyword">none</span></span><br><span class="line">    <span class="keyword">integer</span>::N,fac_result,i</span><br><span class="line">    fac_result=<span class="number">1</span></span><br><span class="line">    <span class="keyword">do</span> i=<span class="number">1</span>,N</span><br><span class="line">        fac_result=fac_result*i</span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">do</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">program</span></span> cal_factor</span><br><span class="line">    <span class="keyword">implicit</span> <span class="keyword">none</span></span><br><span class="line">    <span class="keyword">integer</span>::factor,s=<span class="number">0</span>,i</span><br><span class="line">    <span class="keyword">do</span> i=<span class="number">4</span>,<span class="number">8</span></span><br><span class="line">        s=s+factor(i)</span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">print</span> *,<span class="string">&#x27;S=&#x27;</span>,s</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>输出<code>s=46224</code></p>
<p><strong>练习</strong> 编写子程序，求</p>
<script type="math/tex; mode=display">
\sum_{i=1}^{n} \frac{x^i}{\sum_{j=1}^{i} j}</script><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span></span> item(n,x) result(item_result)</span><br><span class="line">    <span class="keyword">implicit</span> <span class="keyword">none</span></span><br><span class="line">    <span class="keyword">integer</span>::n,i</span><br><span class="line">    <span class="keyword">real</span>::x,item_result,T</span><br><span class="line">    T=<span class="number">0</span></span><br><span class="line">    <span class="keyword">do</span> i=<span class="number">1</span>,n</span><br><span class="line">        T=T+i</span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">do</span></span><br><span class="line">    item_result=x**n/T</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="function"><span class="keyword">program</span></span> main</span><br><span class="line">    <span class="keyword">implicit</span> <span class="keyword">none</span></span><br><span class="line">    <span class="keyword">integer</span>::n,i</span><br><span class="line">    <span class="keyword">real</span>::item,x,s</span><br><span class="line">    read *,n,x</span><br><span class="line">    s=<span class="number">0</span></span><br><span class="line">    <span class="keyword">do</span> i=<span class="number">1</span>,n</span><br><span class="line">        s=s+item(i,x)</span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">print</span> *,s</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h3 id="子例子程序subroutine"><a href="#子例子程序subroutine" class="headerlink" title="子例子程序subroutine"></a>子例子程序<code>subroutine</code></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[recursive] subroutine f[(x1,x2)]</span><br><span class="line">    implicit none</span><br><span class="line">end [subroutine [f]]</span><br><span class="line"></span><br><span class="line">call f(x1,x2)</span><br></pre></td></tr></table></figure>
<p>给虚元加上<code>intent(in)</code>或者<code>intent(out)</code>属性，限制输入变量或者输出变量（不必须）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">integer,intent(in)::n</span><br><span class="line">integer,intent(out)::s</span><br></pre></td></tr></table></figure>
<p><strong>练习</strong> 使用子例子程序求</p>
<script type="math/tex; mode=display">
\sum_{i=1}^{n} i!</script><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">subroutine</span></span> fact(n,<span class="keyword">value</span>)</span><br><span class="line">    <span class="keyword">implicit</span> <span class="keyword">none</span></span><br><span class="line">    <span class="keyword">integer</span>,<span class="keyword">intent</span>(<span class="keyword">in</span>)::n</span><br><span class="line">    <span class="keyword">integer</span>::i</span><br><span class="line">    <span class="keyword">integer</span>,<span class="keyword">intent</span>(<span class="keyword">out</span>)::<span class="keyword">value</span></span><br><span class="line">    <span class="keyword">value</span>=<span class="number">1</span></span><br><span class="line">    <span class="keyword">do</span> i=<span class="number">1</span>,n</span><br><span class="line">        <span class="keyword">value</span>=<span class="keyword">value</span>*i</span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">do</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="function"><span class="keyword">program</span></span> main</span><br><span class="line">    <span class="keyword">implicit</span> <span class="keyword">none</span></span><br><span class="line">    <span class="keyword">integer</span>::s=<span class="number">0</span>,i,<span class="keyword">value</span></span><br><span class="line">    <span class="keyword">do</span> i=<span class="number">1</span>,<span class="number">5</span></span><br><span class="line">        <span class="keyword">call</span> fact(i,<span class="keyword">value</span>)</span><br><span class="line">        s=s+<span class="keyword">value</span></span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">print</span> *,s</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p><strong>练习</strong> 使用子程序求$\sinh(x)$，要求$e^x$的通项小于<code>1e-6</code>时停止</p>
<script type="math/tex; mode=display">
\sinh (x)=\frac{e^x-e^{-x}}{2} 
\newline e^x= \sum_{n=0}^{\infty} \frac{x^n}{n!}</script><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">subroutine</span></span> fact(n,<span class="keyword">value</span>)</span><br><span class="line">    <span class="keyword">implicit</span> <span class="keyword">none</span></span><br><span class="line">    <span class="keyword">integer</span>,<span class="keyword">intent</span>(<span class="keyword">in</span>)::n</span><br><span class="line">    <span class="keyword">integer</span>::i</span><br><span class="line">    <span class="keyword">real</span>(<span class="keyword">kind</span>=<span class="built_in">selected_real_kind</span>(<span class="number">16</span>,<span class="number">100</span>)),<span class="keyword">intent</span>(<span class="keyword">out</span>)::<span class="keyword">value</span></span><br><span class="line">    <span class="keyword">value</span>=<span class="number">1</span></span><br><span class="line">    <span class="keyword">do</span> i=<span class="number">1</span>,n</span><br><span class="line">        <span class="keyword">value</span>=<span class="keyword">value</span>*i</span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">do</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="function"><span class="keyword">program</span></span> main</span><br><span class="line">    <span class="keyword">implicit</span> <span class="keyword">none</span></span><br><span class="line">    <span class="keyword">real</span>(<span class="built_in">selected_real_kind</span>(<span class="number">16</span>,<span class="number">100</span>))::s=<span class="number">0</span>,<span class="keyword">value</span>,exp_=<span class="number">0</span>,x,sinh_</span><br><span class="line">    <span class="keyword">integer</span>::i=<span class="number">2</span></span><br><span class="line">    read *,x</span><br><span class="line">    s=<span class="number">1</span>+x</span><br><span class="line">    <span class="keyword">do</span></span><br><span class="line">        <span class="keyword">call</span> fact(i,<span class="keyword">value</span>)</span><br><span class="line">        exp_=x**i/<span class="keyword">value</span></span><br><span class="line">        s=s+exp_</span><br><span class="line">        <span class="keyword">if</span> (exp_&lt;=<span class="number">1e-6</span>) <span class="keyword">then</span></span><br><span class="line">            <span class="keyword">exit</span></span><br><span class="line">        <span class="keyword">end</span> <span class="keyword">if</span></span><br><span class="line">        i=i+<span class="number">1</span></span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">do</span></span><br><span class="line">    sinh_=(s-(<span class="number">1</span>/s))/<span class="number">2</span></span><br><span class="line">    <span class="built_in">print</span> *,sinh_</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">! 5</span></span><br><span class="line"><span class="comment">! 74.2032105178825331163</span></span><br></pre></td></tr></table></figure>
<h3 id="接口块interface"><a href="#接口块interface" class="headerlink" title="接口块interface"></a>接口块<code>interface</code></h3><p>类型声明之前，<code>implicit none</code>语句之后</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">interface</span><br><span class="line">	function func(x) result(f)</span><br><span class="line">		real::x,f</span><br><span class="line">	end function</span><br><span class="line">end interface</span><br></pre></td></tr></table></figure>
<p>以下情形必须使用接口块：</p>
<ol>
<li>实元是<strong>关键字变元</strong></li>
<li>实元是缺省的<strong>可选变元</strong></li>
<li>通过接口块<strong>改变虚元名称</strong></li>
<li>函数返回结果为<strong>数组</strong>，或过程虚元为一个假定形状数组</li>
</ol>
<h2 id="虚实结合"><a href="#虚实结合" class="headerlink" title="虚实结合"></a>虚实结合</h2><ol>
<li>关键字变元</li>
<li>可选变元<br><code>optional</code>属性声明该元为可选变元<br><code>present(x)</code>函数返回虚元是否结合实元</li>
<li>通过接口块更改虚元名称</li>
<li>虚数组（与实元<strong>形</strong>相同）</li>
<li>虚过程<br><code>intrinsic</code>属性：实元为内在函数<br><code>external</code>或接口块<code>interface</code>：实元为外部过程</li>
</ol>
<p>虚元<strong>按顺序</strong>借用实元储存单元，子程序运行时造成的<strong>实元值的改变将保留</strong>。</p>
<p><strong>练习</strong> 编写通用子程序求定积分（虚过程应用于数值计算实例）</p>
<script type="math/tex; mode=display">
\int_{a}^{b} f(x) \mathrm d x</script><p>以$\int_{0}^{2} (x^2+4x+7) \mathrm dx$​为例</p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span></span> f(x) result(y)</span><br><span class="line">    <span class="keyword">implicit</span> <span class="keyword">none</span></span><br><span class="line">    <span class="keyword">real</span>::x,y</span><br><span class="line">    y=x**<span class="number">2</span>+<span class="number">4</span>*x+<span class="number">7</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="function"><span class="keyword">subroutine</span></span> int_(a,b,f,delta_x,s)</span><br><span class="line">    <span class="keyword">implicit</span> <span class="keyword">none</span></span><br><span class="line">    <span class="keyword">real</span>::delta_x,a,b,s,a0,b0</span><br><span class="line">    <span class="keyword">real</span>::f</span><br><span class="line">    s=<span class="number">0</span></span><br><span class="line">    a0=a</span><br><span class="line">    b0=a+delta_x</span><br><span class="line">    <span class="keyword">do</span> <span class="keyword">while</span>(b0&lt;=b)</span><br><span class="line">        s=s+((f(b0)+f(a0))/<span class="number">2</span>)*delta_x</span><br><span class="line">        a0=a0+delta_x</span><br><span class="line">        b0=b0+delta_x</span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">do</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="function"><span class="keyword">program</span></span> main</span><br><span class="line">    <span class="keyword">implicit</span> <span class="keyword">none</span></span><br><span class="line">    <span class="keyword">real</span>::a,b,delta_x,s</span><br><span class="line">    <span class="keyword">real</span>,<span class="keyword">external</span>::f</span><br><span class="line">    read *,a,b,delta_x</span><br><span class="line">    <span class="keyword">call</span> int_(a,b,f,delta_x,s)</span><br><span class="line">    <span class="built_in">print</span> *,s</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h2 id="模块module"><a href="#模块module" class="headerlink" title="模块module"></a>模块<code>module</code></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">module m</span><br><span class="line">    implicit none</span><br><span class="line">	integer[,save]::r</span><br><span class="line">	[contains</span><br><span class="line">	内部过程子程序]</span><br><span class="line">end module [m]</span><br><span class="line">program main</span><br><span class="line">	use m</span><br><span class="line">	implicit none</span><br><span class="line">	a=1</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<p><code>implicit none</code>需要在各个程序单元中书写；使用<code>save</code>属性（默认添加）声明全局变量</p>
<p>模块和子程序的区别：模块应<strong>先定义</strong>；模块使用<code>use</code>语句<strong>引用</strong>；模块中<strong>无</strong>可执行语句</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">use m, only:a,b,c</span><br><span class="line">use m, x=&gt;a,y=&gt;b</span><br></pre></td></tr></table></figure>
<p><code>only</code>只共享部分变量；<code>x=&gt;a</code>将模块中的<code>a</code>更名为<code>x</code><br><code>private</code>：专用属性；<code>public</code>：公用属性</p>
<h2 id="类"><a href="#类" class="headerlink" title="类"></a>类</h2><h2 id="选择"><a href="#选择" class="headerlink" title="选择"></a>选择</h2><h2 id="if结构"><a href="#if结构" class="headerlink" title="if结构"></a><code>if</code>结构</h2><p>单分支：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">if 条件 一条语句</span><br></pre></td></tr></table></figure>
<p>多分支：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">if 条件 then</span><br><span class="line">	语句块</span><br><span class="line">else if 条件 then</span><br><span class="line">	语句块</span><br><span class="line">else</span><br><span class="line">	语句块</span><br><span class="line">end if</span><br></pre></td></tr></table></figure>
<p><strong>例</strong> 输入三角形三边，输出边长或不能构成三角形。</p>
<p><strong>例</strong> 排序：给定输入的abcd，按升序输出。</p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">program</span></span> main</span><br><span class="line">    <span class="keyword">implicit</span> <span class="keyword">none</span></span><br><span class="line">    <span class="keyword">real</span>::a,b,c,d,t</span><br><span class="line">    read *,a,b,c,d</span><br><span class="line">    <span class="keyword">if</span> (a&gt;b) <span class="keyword">then</span></span><br><span class="line">        t=a</span><br><span class="line">        a=b</span><br><span class="line">        b=t</span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">if</span></span><br><span class="line">    <span class="keyword">if</span> (c&lt;=a) <span class="keyword">then</span></span><br><span class="line">        t=c</span><br><span class="line">        c=b</span><br><span class="line">        b=a</span><br><span class="line">        a=t</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (a&lt;=c <span class="keyword">.and.</span> c&lt;=b) <span class="keyword">then</span></span><br><span class="line">        t=b</span><br><span class="line">        b=c</span><br><span class="line">        c=t</span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">if</span></span><br><span class="line">    <span class="keyword">if</span> (d&lt;=a) <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">print</span> *,d,a,b,c</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (a&lt;=d <span class="keyword">.and.</span> d&lt;=b) <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">print</span> *,a,d,b,c</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (b&lt;=d <span class="keyword">.and.</span> d&lt;=c) <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">print</span> *,a,b,d,c</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">print</span> *,a,b,c,d</span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">if</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h2 id="case结构"><a href="#case结构" class="headerlink" title="case结构"></a><code>case</code>结构</h2><p>情况表达式为数值型（只能<strong>整型</strong>）：</p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">program</span></span> main</span><br><span class="line">    <span class="keyword">implicit</span> <span class="keyword">none</span></span><br><span class="line">    <span class="keyword">integer</span>::s</span><br><span class="line">    read *,s</span><br><span class="line">    <span class="keyword">select</span> <span class="keyword">case</span>(s)</span><br><span class="line">        <span class="keyword">case</span>(<span class="number">90</span>:<span class="number">100</span>)</span><br><span class="line">            <span class="built_in">print</span> *,<span class="string">&#x27;A&#x27;</span></span><br><span class="line">        <span class="keyword">case</span>(<span class="number">80</span>:<span class="number">89</span>)</span><br><span class="line">            <span class="built_in">print</span> *,<span class="string">&#x27;B&#x27;</span></span><br><span class="line">        <span class="keyword">case</span> <span class="keyword">default</span></span><br><span class="line">            <span class="built_in">print</span> *,<span class="string">&#x27;N&#x27;</span></span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">select</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>情况表达式为<strong>字符型</strong>（或者字符数组）：</p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">program</span></span> main</span><br><span class="line">    <span class="keyword">implicit</span> <span class="keyword">none</span></span><br><span class="line">    <span class="keyword">character</span>::s</span><br><span class="line">    read *,s</span><br><span class="line">    <span class="keyword">select</span> <span class="keyword">case</span>(s)</span><br><span class="line">        <span class="keyword">case</span>(<span class="string">&#x27;A&#x27;</span>)</span><br><span class="line">            <span class="built_in">print</span> *,<span class="string">&#x27;90:100&#x27;</span></span><br><span class="line">        <span class="keyword">case</span>(<span class="string">&#x27;B&#x27;</span>)</span><br><span class="line">            <span class="built_in">print</span> *,<span class="string">&#x27;80:90&#x27;</span></span><br><span class="line">        <span class="keyword">case</span> <span class="keyword">default</span></span><br><span class="line">            <span class="built_in">print</span> *,<span class="string">&#x27;None&#x27;</span></span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">select</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>情况表达式为<strong>逻辑型</strong>：</p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">program</span></span> main</span><br><span class="line">    <span class="keyword">implicit</span> <span class="keyword">none</span></span><br><span class="line">    <span class="keyword">integer</span>::s</span><br><span class="line">    read *,s</span><br><span class="line">    <span class="keyword">select</span> <span class="keyword">case</span>(s&gt;=<span class="number">90</span>)</span><br><span class="line">        <span class="keyword">case</span>(<span class="literal">.true.</span>)</span><br><span class="line">            <span class="built_in">print</span> *,<span class="string">&#x27;A&#x27;</span></span><br><span class="line">        <span class="keyword">case</span>(<span class="literal">.false.</span>)</span><br><span class="line">            <span class="built_in">print</span> *,<span class="string">&#x27;B&#x27;</span></span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">select</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p><strong>练习</strong> 输入一个数，判断能否被3整除。</p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">! if</span></span><br><span class="line"><span class="function"><span class="keyword">program</span></span> main</span><br><span class="line">    <span class="keyword">implicit</span> <span class="keyword">none</span></span><br><span class="line">    <span class="keyword">integer</span>::x</span><br><span class="line">    read *,x</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">mod</span>(x,<span class="number">3</span>)==<span class="number">0</span>) <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">print</span> *,<span class="string">&#x27;Yes&#x27;</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">print</span> *,<span class="string">&#x27;No&#x27;</span></span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">if</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">! case logical</span></span><br><span class="line"><span class="function"><span class="keyword">program</span></span> main</span><br><span class="line">    <span class="keyword">implicit</span> <span class="keyword">none</span></span><br><span class="line">    <span class="keyword">integer</span>::x</span><br><span class="line">    read *,x</span><br><span class="line">    <span class="keyword">select</span> <span class="keyword">case</span> (<span class="built_in">mod</span>(x,<span class="number">3</span>)==<span class="number">0</span>)</span><br><span class="line">        <span class="keyword">case</span>(<span class="literal">.true.</span>)</span><br><span class="line">            <span class="built_in">print</span> *,<span class="string">&#x27;Yes&#x27;</span></span><br><span class="line">        <span class="keyword">case</span>(<span class="literal">.false.</span>)</span><br><span class="line">            <span class="built_in">print</span> *,<span class="string">&#x27;No&#x27;</span></span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">select</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">! case integer</span></span><br><span class="line"><span class="function"><span class="keyword">program</span></span> main</span><br><span class="line">    <span class="keyword">implicit</span> <span class="keyword">none</span></span><br><span class="line">    <span class="keyword">integer</span>::x</span><br><span class="line">    read *,x</span><br><span class="line">    <span class="keyword">select</span> <span class="keyword">case</span> (<span class="built_in">mod</span>(x,<span class="number">3</span>))</span><br><span class="line">        <span class="keyword">case</span>(<span class="number">0</span>)</span><br><span class="line">            <span class="built_in">print</span> *,<span class="string">&#x27;Yes&#x27;</span></span><br><span class="line">        <span class="keyword">case</span> <span class="keyword">default</span></span><br><span class="line">            <span class="built_in">print</span> *,<span class="string">&#x27;No&#x27;</span></span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">select</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p><strong>练习</strong> 求一元二次方程$ax^2+bx+c=0$​​的根</p>
<script type="math/tex; mode=display">
\Delta=b^2-4ac\\
\left\{\begin{matrix}
 a=0,b\ne 0 & x=- {c\over b} \\
 a=0,b = 0,c\ne 0 & x=\text{None}   \\
 a=0,b=0,c=0 & x=\text{Any} \\
 a\ne 0 & \left\{\begin{matrix}
 x ={-b \pm \sqrt{\Delta}\over 2a}  & \Delta>0 \\
 x=-{b \over 2a} & \Delta=0 \\
 x={-b \pm \sqrt{-\Delta}i\over 2a} & \Delta<0
\end{matrix}\right.
\end{matrix}\right.</script><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">program</span></span> main</span><br><span class="line">    <span class="keyword">real</span>::a,b,c,delta</span><br><span class="line">    read *,a,b,c</span><br><span class="line">    delta=b**<span class="number">2</span>-<span class="number">4</span>*a*c</span><br><span class="line">    <span class="keyword">if</span> (a==<span class="number">0</span>) <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">if</span> (b==<span class="number">0</span>) <span class="keyword">then</span></span><br><span class="line">            <span class="keyword">if</span> (c==<span class="number">0</span>) <span class="keyword">then</span></span><br><span class="line">                <span class="built_in">print</span> *,<span class="string">&quot;Any&quot;</span></span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                <span class="built_in">print</span> *,<span class="string">&quot;None&quot;</span></span><br><span class="line">            <span class="keyword">end</span> <span class="keyword">if</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">print</span> *,-(c/b)</span><br><span class="line">        <span class="keyword">end</span> <span class="keyword">if</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">if</span> (delta&gt;<span class="number">0</span>) <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">print</span> *,(-b+<span class="built_in">sqrt</span>(delta))/<span class="number">2</span>*a,(-b-<span class="built_in">sqrt</span>(delta))/<span class="number">2</span>*a</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (delta==<span class="number">0</span>) <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">print</span> *,-(b/<span class="number">2</span>*a)</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">print</span> *,<span class="built_in">cmplx</span>(-(b/<span class="number">2</span>*a),<span class="built_in">sqrt</span>(-delta)/<span class="number">2</span>*a),<span class="built_in">cmplx</span>(-(b/<span class="number">2</span>*a),-<span class="built_in">sqrt</span>(-delta)/<span class="number">2</span>*a)</span><br><span class="line">        <span class="keyword">end</span> <span class="keyword">if</span></span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">if</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h2 id="循环"><a href="#循环" class="headerlink" title="循环"></a>循环</h2><h2 id="do循环"><a href="#do循环" class="headerlink" title="do循环"></a><code>do</code>循环</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">do [i=start,stop[,step]]</span><br><span class="line">	...</span><br><span class="line">end do</span><br></pre></td></tr></table></figure>
<p><strong><code>exit</code>退出循环，<code>cycle</code>退出本次</strong></p>
<p><code>start,stop[,step]</code>可以为整型、实型、变量、表达式；类型可以不一致（按赋值的原则转换）；</p>
<p>循环体语句次数</p>
<script type="math/tex; mode=display">
\max(\left \lfloor \frac{e_2-e_1+e_3}{e_3}  \right \rfloor ,0)\approx \frac{e_2-e_1}{e_3} +1</script><p><code>exit</code>出口、正常出口</p>
<p>循环变量不能赋值</p>
<p><strong>进入循环</strong>时，将初值赋给循环变量<code>i</code>；退出循环时，循环变量<code>i</code>增加一个步长；<strong>未通过正常出口退出</strong>时，循环变量<code>i</code>保持不变</p>
<p><strong>练习</strong> 采用迭代法求一元二次方程的根</p>
<ol>
<li><p>将含$x$的式子写成$x=f(x)$形式，令$x={-x^2-1\over 4}$</p>
</li>
<li><p>估计$x$的范围，给定初值$x_0$，求出近似值$x_1$</p>
</li>
<li><p>将$x_1$代入上式，求出近似值$x_2$，继续迭代</p>
</li>
<li><p>当$\abs{x<em>{n+1}-x</em>{n}}\le \varepsilon $时，认为达到精度；如果循环次数足够大时仍未收敛，则认为发散divergent</p>
</li>
</ol>
<p><strong>练习</strong> 求阶乘的和</p>
<script type="math/tex; mode=display">
\sum_{i=1}^{m} n!</script><p><code>do-while</code>循环</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">do while 条件</span><br><span class="line">	...</span><br><span class="line">end do</span><br></pre></td></tr></table></figure>
<p>练习 用三种do循环求</p>
<script type="math/tex; mode=display">
\sum_{i=0}^{63} 2^i</script><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">program</span></span> main</span><br><span class="line">    <span class="keyword">implicit</span> <span class="keyword">none</span></span><br><span class="line">    <span class="keyword">integer</span>::i=<span class="number">0</span></span><br><span class="line">    <span class="keyword">real</span>(<span class="keyword">kind</span>=<span class="built_in">selected_real_kind</span>(<span class="number">32</span>,<span class="number">64</span>))::<span class="built_in">sum</span>=<span class="number">0</span></span><br><span class="line">    <span class="comment">!1    </span></span><br><span class="line">    <span class="keyword">do</span> i=<span class="number">0</span>,<span class="number">63</span></span><br><span class="line">        <span class="built_in">sum</span>=<span class="built_in">sum</span>+<span class="number">2.0</span>**i</span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">print</span> *,<span class="built_in">sum</span></span><br><span class="line">    <span class="comment">!2</span></span><br><span class="line">    i=<span class="number">0</span></span><br><span class="line">    <span class="built_in">sum</span>=<span class="number">0</span></span><br><span class="line">    <span class="keyword">do</span> <span class="keyword">while</span> (i&lt;=<span class="number">63</span>)</span><br><span class="line">        <span class="built_in">sum</span>=<span class="built_in">sum</span>+<span class="number">2.0</span>**i</span><br><span class="line">        i=i+<span class="number">1</span></span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">print</span> *,<span class="built_in">sum</span></span><br><span class="line">	<span class="comment">!3</span></span><br><span class="line">    i=<span class="number">0</span></span><br><span class="line">    <span class="built_in">sum</span>=<span class="number">0</span></span><br><span class="line">    <span class="keyword">do</span></span><br><span class="line">        <span class="built_in">sum</span>=<span class="built_in">sum</span>+<span class="number">2.0</span>**i</span><br><span class="line">        i=i+<span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> (i&gt;<span class="number">63</span>) <span class="keyword">exit</span></span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">print</span> *,<span class="built_in">sum</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">! 18446744073709551615.0000000000000000</span></span><br></pre></td></tr></table></figure>
<p><strong>练习</strong> 寻找100~999之内的回文数</p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">program</span></span> main</span><br><span class="line">    <span class="keyword">implicit</span> <span class="keyword">none</span></span><br><span class="line">    <span class="keyword">integer</span>::i,ans</span><br><span class="line">    ans=<span class="number">1</span></span><br><span class="line">    <span class="keyword">do</span> i=<span class="number">100</span>,<span class="number">999</span></span><br><span class="line">        <span class="keyword">if</span> (i/<span class="number">100</span>==<span class="built_in">mod</span>(i,<span class="number">10</span>)) <span class="keyword">then</span></span><br><span class="line">            ans=ans+<span class="number">1</span></span><br><span class="line">        <span class="keyword">end</span> <span class="keyword">if</span></span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">print</span> *,ans</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h2 id="隐式do循环"><a href="#隐式do循环" class="headerlink" title="隐式do循环"></a>隐式<code>do</code>循环</h2><p>在输入输出中使用，左括号等于<code>do</code>，右括号等于<code>end do</code></p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span> *,(x, i=<span class="number">1</span>,<span class="number">10</span>,<span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<p>注：只能应用于<strong>输入、输出、数组赋值</strong></p>
<h2 id="递归"><a href="#递归" class="headerlink" title="递归"></a>递归</h2><h1 id="高级数据类型"><a href="#高级数据类型" class="headerlink" title="高级数据类型"></a>高级数据类型</h1><h2 id="数组-dimension-1"><a href="#数组-dimension-1" class="headerlink" title="数组 dimension"></a>数组 <font color="red">dimension</font></h2><h2 id="一维数组"><a href="#一维数组" class="headerlink" title="一维数组"></a>一维数组</h2><p><strong>练习</strong> 输入10个整数，并按输入时的逆序输出，每行5个数。</p>
<p><strong>数组构成器</strong>：是表达式，使用<code>(/</code>和<code>/)</code>定界<br>其中可以是值的序列、隐含<code>do</code>循环、数组片段</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">A=(/1,2,3,4/)</span><br><span class="line">A=(/sqrt(real(i)),i=1,4/)</span><br><span class="line">A=(/D(3:9:3)/)</span><br></pre></td></tr></table></figure>
<h2 id="二维数组"><a href="#二维数组" class="headerlink" title="二维数组"></a>二维数组</h2><p><strong>声明</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">integer,dimension(1:4,1:5)::A</span><br></pre></td></tr></table></figure>
<p>逻辑结构：二维表；物理结构：先列后行，线性存放</p>
<p><strong>输入输出</strong> 格式编辑符可复用</p>
<ol>
<li><p><code>read *,A</code>按列依次输入</p>
</li>
<li><p>双重显<code>do</code>，多行输入</p>
</li>
<li><p>双重隐<code>do</code>，一行输入，先外后内</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">read *,((A(i,j),j=1,3),i=1,2)</span><br></pre></td></tr></table></figure>
</li>
<li><p>一重隐<code>do</code>+数组片段，一行输入</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">read *,(A(i,1:3),i=1,2)</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p><strong>练习</strong> $4\times 4$数组输出矩阵形状，求主对角线元素之和</p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">program</span></span> main</span><br><span class="line">    <span class="keyword">implicit</span> <span class="keyword">none</span></span><br><span class="line">    <span class="keyword">integer</span>,<span class="keyword">dimension</span>(<span class="number">4</span>,<span class="number">4</span>)::A</span><br><span class="line">    <span class="keyword">integer</span>::i,s</span><br><span class="line">    read *,(A(i,<span class="number">1</span>:<span class="number">4</span>),i=<span class="number">1</span>,<span class="number">4</span>)</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&#x27;(1X,4I5)&#x27;</span>,(A(i,<span class="number">1</span>:<span class="number">4</span>),i=<span class="number">1</span>,<span class="number">4</span>)</span><br><span class="line">    s=<span class="number">0</span></span><br><span class="line">    <span class="keyword">do</span> i=<span class="number">1</span>,<span class="number">4</span></span><br><span class="line">        s=s+A(i,i)</span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">print</span> *,s</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">! 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16</span></span><br><span class="line"><span class="comment">!      1    2    3    4</span></span><br><span class="line"><span class="comment">!      5    6    7    8</span></span><br><span class="line"><span class="comment">!      9   10   11   12</span></span><br><span class="line"><span class="comment">!     13   14   15   16</span></span><br><span class="line"><span class="comment">!           34</span></span><br></pre></td></tr></table></figure>
<p><strong>数组构造器</strong>给二维数组赋初值：<code>reshape</code>函数改变形状<br><code>source</code>为一维数组，<code>shape</code>为二维数组的形，<code>order</code>改变行列顺序，默认列优先<br>前两参数名可省略，<code>order</code>不可省略</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">integer,dimension(2,3)::A</span><br><span class="line">1 3 5</span><br><span class="line">2 4 6</span><br><span class="line">A=reshape(source=(/1,2,3,4,5,6/),shape=(/2,3/))</span><br><span class="line">A=reshape((/1,2,3,4,5,6/),(/2,3/))</span><br><span class="line">1 2 3</span><br><span class="line">4 5 6</span><br><span class="line">A=reshape(source=(/1,2,3,4,5,6/),shape=(/2,3/),order=(/2,1/))</span><br><span class="line">A=reshape((/1,2,3,4,5,6/),(/2,3/),order=(/2,1/))</span><br></pre></td></tr></table></figure>
<h2 id="数组形式"><a href="#数组形式" class="headerlink" title="数组形式"></a>数组形式</h2><h3 id="常数组"><a href="#常数组" class="headerlink" title="常数组"></a>常数组</h3><p>维界为数值或常数<code>parameter</code><br>用于主程序，函数子程序、子例行子程序。既可作为实数组，也可以作为虚数组</p>
<h3 id="可调数组"><a href="#可调数组" class="headerlink" title="可调数组"></a>可调数组</h3><p>声明大小时使用<strong>整型变量</strong><br>只在子程序中作虚数组使用</p>
<h3 id="假定形状数组"><a href="#假定形状数组" class="headerlink" title="假定形状数组"></a>假定形状数组</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">integer,dimension(:,:)::D</span><br></pre></td></tr></table></figure>
<p>用于<strong>子程序</strong>中作虚数组，只用<code>:</code>表示大小或只写一个维界</p>
<p>调用时必须写<strong>接口块</strong>，调用时从实数组获得形状参数，要求虚实维数一致，维界可不一致</p>
<h3 id="动态数组"><a href="#动态数组" class="headerlink" title="动态数组"></a>动态数组</h3><p>只用<code>:</code>表示大小，带有<code>allocatable</code><strong>可分配</strong>属性<br><code>allocate</code>分配内存，<code>deallocate</code>释放内存，未释放前不能再分配</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">real,dimension(:),allocatable::A1</span><br><span class="line">real,dimension(:,:),allocatable::A2</span><br><span class="line">allocate(A1(2),A2(2,3))</span><br><span class="line">deallocate(A1,A2)</span><br></pre></td></tr></table></figure>
<p><strong>练习</strong> 把$n$个整数中最大的数找出来，并指出它在队列中的位置。数组大小未知。</p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">program</span></span> main</span><br><span class="line">    <span class="keyword">implicit</span> <span class="keyword">none</span></span><br><span class="line">    <span class="keyword">integer</span>,<span class="keyword">dimension</span>(:),<span class="keyword">allocatable</span>::A <span class="comment">!声明动态数组</span></span><br><span class="line">    <span class="keyword">integer</span>::<span class="built_in">max</span>,k,i,n</span><br><span class="line">    read *,n</span><br><span class="line">    <span class="built_in">allocate</span>(A(n)) <span class="comment">!分配存储空间</span></span><br><span class="line">    read *,A</span><br><span class="line">    <span class="built_in">max</span>=A(<span class="number">1</span>)</span><br><span class="line">    k=<span class="number">1</span></span><br><span class="line">    <span class="keyword">do</span> i=<span class="number">2</span>,n</span><br><span class="line">        <span class="keyword">if</span> (A(i)&gt;<span class="built_in">max</span>) <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">max</span>=A(i)</span><br><span class="line">            k=i</span><br><span class="line">        <span class="keyword">end</span> <span class="keyword">if</span></span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">print</span> *,<span class="built_in">max</span>,k</span><br><span class="line">    <span class="built_in">deallocate</span>(A)   <span class="comment">!释放空间</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">! 5        </span></span><br><span class="line"><span class="comment">! 4 6 9 12 3</span></span><br><span class="line"><span class="comment">!           12           4</span></span><br></pre></td></tr></table></figure>
<h2 id="数组运算"><a href="#数组运算" class="headerlink" title="数组运算"></a>数组运算</h2><h3 id="筛选有序置数"><a href="#筛选有序置数" class="headerlink" title="筛选有序置数"></a>筛选有序置数</h3><h3 id="交换数组两行"><a href="#交换数组两行" class="headerlink" title="交换数组两行"></a>交换数组两行</h3><p>数组片段；元素循环</p>
<h3 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h3><p>选择排序；冒泡排序</p>
<h3 id="查找"><a href="#查找" class="headerlink" title="查找"></a>查找</h3><p>顺序；二分</p>
<h3 id="矩阵运算"><a href="#矩阵运算" class="headerlink" title="矩阵运算"></a>矩阵运算</h3><p><strong>乘法</strong></p>
<script type="math/tex; mode=display">
C_{ij}=\sum_{k=1}^{n} a_{ik}b_{kj}</script><p>或<code>matmul(A,B)</code></p>
<p><strong>矩阵转置</strong></p>
<p><code>B=transpose(A)</code>或<code>B(i,j)=A(j,i)</code>或方阵按主对角线交换</p>
<h3 id="数组的移动"><a href="#数组的移动" class="headerlink" title="数组的移动"></a>数组的移动</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1 2 3 4 5</span><br><span class="line">5 1 2 3 4</span><br></pre></td></tr></table></figure>
<p><strong>练习</strong> 给定一个$8\times 9$​​​的二维数组，按行读入，求每一列的和，并排序。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">for _ in range(8): print(*[random.randint(1,15) for i in range(9)])</span><br><span class="line">4 12 13 13 1 12 3 11 7</span><br><span class="line">5 3 1 13 9 13 4 1 7</span><br><span class="line">13 3 8 10 3 3 14 12 2</span><br><span class="line">6 6 15 10 5 2 6 3 12</span><br><span class="line">14 2 9 6 7 8 8 10 2</span><br><span class="line">9 2 6 4 12 3 6 3 14</span><br><span class="line">1 10 4 12 15 4 15 14 8</span><br><span class="line">11 2 8 7 12 5 15 6 2</span><br><span class="line">列和</span><br><span class="line">63 40 64 75 64 50 71 60 54</span><br></pre></td></tr></table></figure>
<p>冒泡排序</p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">subroutine</span></span> sort(A)</span><br><span class="line">    <span class="keyword">implicit</span> <span class="keyword">none</span></span><br><span class="line">    <span class="keyword">integer</span>,<span class="keyword">dimension</span>(<span class="number">9</span>)::A</span><br><span class="line">    <span class="keyword">integer</span>::i,j,t,flag</span><br><span class="line">    <span class="keyword">do</span> j=<span class="number">1</span>,<span class="number">8</span></span><br><span class="line">        flag=<span class="number">0</span></span><br><span class="line">        <span class="keyword">do</span> i=<span class="number">1</span>,<span class="number">8</span>-j+<span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span> (A(i)&gt;A(i+<span class="number">1</span>)) <span class="keyword">then</span></span><br><span class="line">                t=A(i);A(i)=A(i+<span class="number">1</span>);A(i+<span class="number">1</span>)=t</span><br><span class="line">                <span class="comment">! print &#x27;(9I2)&#x27;,A</span></span><br><span class="line">                flag=<span class="number">1</span></span><br><span class="line">            <span class="keyword">end</span> <span class="keyword">if</span></span><br><span class="line">        <span class="keyword">end</span> <span class="keyword">do</span></span><br><span class="line">        <span class="keyword">if</span> (flag==<span class="number">0</span>) <span class="keyword">then</span></span><br><span class="line">            <span class="keyword">exit</span></span><br><span class="line">        <span class="keyword">end</span> <span class="keyword">if</span></span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">do</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="function"><span class="keyword">program</span></span> main</span><br><span class="line">    <span class="keyword">integer</span>,<span class="keyword">dimension</span>(<span class="number">8</span>,<span class="number">9</span>)::D</span><br><span class="line">    <span class="keyword">integer</span>,<span class="keyword">dimension</span>(<span class="number">9</span>)::S=<span class="number">0</span></span><br><span class="line">    <span class="keyword">integer</span>::i,s_l</span><br><span class="line">    <span class="keyword">interface</span></span><br><span class="line">        <span class="function"><span class="keyword">subroutine</span></span> sort(A)</span><br><span class="line">            <span class="keyword">implicit</span> <span class="keyword">none</span></span><br><span class="line">            <span class="keyword">integer</span>,<span class="keyword">dimension</span>(<span class="number">9</span>)::A</span><br><span class="line">            <span class="keyword">integer</span>::i,j,t,flag</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">interface</span></span><br><span class="line">    read *,(D(i,:),i=<span class="number">1</span>,<span class="number">8</span>)</span><br><span class="line">    <span class="keyword">do</span> i=<span class="number">1</span>,<span class="number">9</span></span><br><span class="line">        s_l=<span class="number">0</span></span><br><span class="line">        <span class="keyword">do</span> j=<span class="number">1</span>,<span class="number">8</span></span><br><span class="line">            s_l=s_l+D(j,i)</span><br><span class="line">        <span class="keyword">end</span> <span class="keyword">do</span></span><br><span class="line">        S(i)=s_l</span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">print</span> <span class="string">&#x27;(9I3)&#x27;</span>,(S)</span><br><span class="line">    <span class="keyword">call</span> sort(S)</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&#x27;(9I3)&#x27;</span>,(S)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>选择排序</p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">subroutine</span></span> sort(A)</span><br><span class="line">    <span class="keyword">implicit</span> <span class="keyword">none</span></span><br><span class="line">    <span class="keyword">integer</span>,<span class="keyword">dimension</span>(<span class="number">9</span>)::A</span><br><span class="line">    <span class="keyword">integer</span>::i,j,t</span><br><span class="line">    <span class="keyword">do</span> j=<span class="number">1</span>,<span class="number">8</span></span><br><span class="line">        <span class="keyword">do</span> i=j+<span class="number">1</span>,<span class="number">9</span></span><br><span class="line">            <span class="keyword">if</span> (A(j)&gt;A(i)) <span class="keyword">then</span></span><br><span class="line">                t=A(j);A(j)=A(i);A(i)=t</span><br><span class="line">            <span class="keyword">end</span> <span class="keyword">if</span></span><br><span class="line">        <span class="keyword">end</span> <span class="keyword">do</span></span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">do</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>插入排序</p>
<h2 id="字符"><a href="#字符" class="headerlink" title="字符"></a>字符</h2><p><strong>练习</strong> 输出如下图形</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">    *******</span><br><span class="line">   *******</span><br><span class="line">  *******</span><br><span class="line"> *******</span><br><span class="line">*******</span><br></pre></td></tr></table></figure>
<p><strong>练习</strong> 验证一串字符是否为回文</p>
<p>去除尾部空格；首尾对应字符比较；不同退出</p>
<h2 id="派生"><a href="#派生" class="headerlink" title="派生"></a>派生</h2><h2 id="指针"><a href="#指针" class="headerlink" title="指针"></a>指针</h2><h1 id="文件"><a href="#文件" class="headerlink" title="文件"></a>文件</h1><h2 id="基本操作"><a href="#基本操作" class="headerlink" title="基本操作"></a>基本操作</h2><p>打开文件、读/写文件、关闭文件</p>
<h2 id="打开-关闭文件"><a href="#打开-关闭文件" class="headerlink" title="打开/关闭文件"></a>打开/关闭文件</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">open(unit,file,status,access,form,recl,action,blank,iostat,err)</span><br></pre></td></tr></table></figure>
<ol>
<li><p><code>unit</code>文件号，无符号整数，在第一位时可省略名称</p>
</li>
<li><p><code>file</code>文件名，字符型，将文件号与文件连接</p>
</li>
<li><p><code>status</code>文件状态，缺省值为<code>unknown</code>，包括</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">old</span><br><span class="line">new 新文件</span><br><span class="line">replace 不存在时新建；存在时覆盖</span><br><span class="line">scratch 临时文件</span><br><span class="line">unknown 存在则打开；不存在则新建</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>access</code>，顺序文件<code>sequential</code>、直接文件<code>direct</code>（需要<code>recl</code>指定长度），缺省值<code>sequential</code></p>
</li>
<li><p><code>form</code>，有格式<code>formatted</code>（顺序文件）、无格式<code>unformatted</code>（直接文件）</p>
</li>
<li><p>其他</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">action = read,write,readwrite,缺省readwrite</span><br><span class="line">blank = null缺省空格 </span><br><span class="line">iostat</span><br><span class="line">err 出错转到</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>有格式顺序文件<code>open(2,file=&quot;A.dat&quot;)</code><br>有格式直接文件<code>open(2,file=&quot;A.dat&quot;,access=&quot;direct&quot;,form=&quot;formatted&quot;,recl=12)</code><br>无格式顺序文件<br>无格式直接文件<br>临时文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">close(unit,iostat,status)</span><br><span class="line">status=keep,delete 默认保留</span><br><span class="line"></span><br><span class="line">close(2)</span><br></pre></td></tr></table></figure>
<h2 id="文件读-写"><a href="#文件读-写" class="headerlink" title="文件读/写"></a>文件读/写</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">read (unit,fmt,rec,iostat,advance) 输入表</span><br><span class="line">iostat &lt;0文件结束 &gt;0操作错误 =0执行成功</span><br><span class="line">advance &quot;Yes&quot;换行读取 &quot;No&quot;不换行读取</span><br></pre></td></tr></table></figure>
<p>有格式文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">read (2,*) a,b,c</span><br><span class="line">read (2,fmt=&#x27;(3F4.1)&#x27;) a,b,c 带读取</span><br><span class="line">read (2,*,rec=5) a,b,c 带记录号</span><br></pre></td></tr></table></figure>
<p>无格式文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">read (2) i,j</span><br><span class="line">read (20,rec=3) i,j</span><br></pre></td></tr></table></figure>
<p><strong>练习</strong> 从键盘输入N个学生的姓名和考试成绩，把它写入到一个顺序文件中，并把建立的文件中的数据显示到终端显示器上。</p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">program</span></span> creat_file</span><br><span class="line">    <span class="keyword">implicit</span> <span class="keyword">none</span></span><br><span class="line">    <span class="keyword">character</span>(<span class="number">20</span>)::<span class="keyword">name</span></span><br><span class="line">    <span class="keyword">real</span>::score</span><br><span class="line">    <span class="keyword">integer</span>::n,i</span><br><span class="line">    open(<span class="number">1</span>,<span class="keyword">file</span>=<span class="string">&quot;student.dat&quot;</span>,<span class="keyword">status</span>=<span class="string">&quot;replace&quot;</span>)</span><br><span class="line">    read *,n</span><br><span class="line">    <span class="keyword">do</span> i=<span class="number">1</span>,n</span><br><span class="line">        read *,<span class="keyword">name</span>,score</span><br><span class="line">        <span class="built_in">write</span> (<span class="number">1</span>,<span class="string">&#x27;(A20,F6.1)&#x27;</span>) <span class="keyword">name</span>,score</span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">do</span></span><br><span class="line">    close(<span class="number">1</span>)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">A                     50.0</span><br><span class="line">B                     70.0</span><br><span class="line">C                    100.0</span><br></pre></td></tr></table></figure>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">program</span></span> read_file</span><br><span class="line">    <span class="keyword">implicit</span> <span class="keyword">none</span></span><br><span class="line">    <span class="keyword">character</span>(<span class="number">20</span>)::<span class="keyword">name</span></span><br><span class="line">    <span class="keyword">real</span>::score</span><br><span class="line">    <span class="keyword">integer</span>::is</span><br><span class="line">    open(<span class="number">1</span>,<span class="keyword">file</span>=<span class="string">&quot;student.dat&quot;</span>)</span><br><span class="line">    read (<span class="number">1</span>,<span class="string">&#x27;(A20,F6.1)&#x27;</span>,<span class="keyword">iostat</span>=is) <span class="keyword">name</span>,score</span><br><span class="line">    <span class="keyword">do</span> <span class="keyword">while</span> (is==<span class="number">0</span>)</span><br><span class="line">        <span class="built_in">write</span> (*,<span class="string">&#x27;(A20,F6.1)&#x27;</span>) <span class="keyword">name</span>,score</span><br><span class="line">        read (<span class="number">1</span>,<span class="string">&#x27;(A20,F6.1)&#x27;</span>,<span class="keyword">iostat</span>=is) <span class="keyword">name</span>,score</span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">do</span></span><br><span class="line">    close(<span class="number">1</span>)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h2 id="文件操作"><a href="#文件操作" class="headerlink" title="文件操作"></a>文件操作</h2><p><code>rewind</code>反绕、<code>backspace</code>退格</p>
<p><code>inquire</code>查询：按文件号查询、按文件名查询、按长度查询</p>
<p><strong>练习</strong> 检查文件<code>student.dat</code>中学生的数据后发现第K1个记录的学生姓名有错，第K2个记录的学生的成绩有误。编写程序修改原来的文件。</p>
<h1 id="拾遗"><a href="#拾遗" class="headerlink" title="拾遗"></a>拾遗</h1><p>甲、乙、丙同时开始放鞭炮，甲每隔$t_1$秒放一次，乙每隔$t_2$秒放一次，丙每隔$t_3$秒放一次。每个人各放$n$​个鞭炮，编写程序求出总共能听到多少次鞭炮声。</p>
<p><strong>思路</strong></p>
<p>可以使用数组模拟该过程或者使用数学方法运算。<strong>数组方法</strong>十分简单，可以将每一秒离散地看作数组的一个元素，只需要开一个长度不小于<code>max(t1,t2,t3)*(n-1)+1</code>的数组模拟即可。置初值为0，设1为有响声。最后将整个数组求和即可。</p>
<p><strong>数学方法</strong>：首先将3个时间从<strong>小到大排列</strong>，假设<strong>从小到大为甲、乙、丙</strong>，周期分别是$t_1,t_2,t_3$。现在需要确定哪些时段甲乙丙三人都有可能放，哪些时段乙丙可能放，有哪些时段只剩下丙在放。<br>必然是甲先完，接下来是乙完，最后是丙完。</p>
<p>接下来考虑三个时段应该如何分配。考虑甲、乙、丙的<strong>最后一声</strong>：设时刻为$t$，如果$t=0$时是甲乙丙第一次齐放的时候，那么甲响最后一声的时间$t<em>{1t}$为：$t</em>{1t}=t<em>1(n-1)$，乙响最后一声的时间为：$t</em>{2t}=t<em>2(n-1)$，丙响最后一声的时间为：$t</em>{3t}=t<em>3(n-1)$。其中丙响最后一声的时间就是结束的时间。可以以此类推将$[0,t</em>{3t}]$的时间分成3份：$[0,t<em>{1t}],(t</em>{1t},t<em>{2t}],(t</em>{2t},t<em>{3t}]$；因为不能排除在$t=t</em>{1t}$时刻三声齐响，或者$t=t_{2t}$时刻两声齐响，同时为了把第n次响声放入前区间内方便计数，因此右区间设为闭。</p>
<ol>
<li><p>在$[0,t_{1t}]$区间内，甲乙丙均可能发出响声。由于响声在某一时刻会重叠，导致多个响声听上去是一个，因此可以<strong>先计算出来实际响了几次，再减去重复的</strong>即可。<br> <strong>实际响的次数</strong>：<code>n+(t1t/t2)+(t1t/t3)</code>，其中<code>/</code>为整除，三项分别为甲乙丙的次数，且$t=0$时的第一次只计一次。</p>
<p> 但其中会有重复。先计算甲乙两者的重复，因为甲乙两者同时开始，因此考虑甲乙周期的最小公倍数数$t_{12}=\mathrm{lcm}{t_1,t_2}$​，<strong>甲乙同时响的次数</strong>为<code>t1t/t12</code>，可以为0，且已去掉第一次。</p>
<p> 同理，乙丙的重复为<code>t1t/t23</code>，甲丙重复的次数为<code>t1t/t13</code>，有$t<em>{23}=\mathrm{lcm}{t_2,t_3}$，$t</em>{13}=\mathrm{lcm}{t_1,t_3}$​。</p>
<p> 但是若有甲乙丙三者同时响的可能（比如$t<em>1=1,t_2=2,t_3=3$在$t=6$时），则会被减去三次。但原来也被加过三次，因此还需要再加一次即可，考虑$t</em>{123}=\mathrm{lcm}{t_1,t_2,t_3}$，则重复次数为<code>t1t/t123</code>。</p>
<p> 因此在$[0,t_{1t}]$区间内听到总响声$n_1$为</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">t1t=t1*(n-1);t12=lcm(t1,t2);t13=lcm(t1,t3);t23=lcm(t2,t3);t123=lcm(t1,t2,t3)</span><br><span class="line">n1=n+(t1t/t2)+(t1t/t3)-t1t/t12-t1t/t23-t1t/t13+t1t/t123</span><br></pre></td></tr></table></figure>
</li>
<li><p>在$(t<em>{1t},t</em>{2t}]$区间内， 只有乙丙可能会有重复。但此时应注意，乙和丙此时的起始点不一定是对齐的，所以应该计算乙和丙的下一次相遇在哪个时间点。已知乙和丙的最小公倍数是$t<em>{23}$，而乙丙的重复为<code>t1t/t23</code>即$\left \lfloor t</em>{1t}\over{t<em>{23}}  \right \rfloor $，因此在$[0,t</em>{1t}]$区间内乙丙最后一次相遇的时间为</p>
<script type="math/tex; mode=display">
 t=t_{23}\left \lfloor t_{1t}\over{t_{23}}  \right \rfloor=t_{1t}-(t_{1t}\mod t_{23})</script><p> 因此乙丙的下一次相遇，也是在$(t<em>{1t},t</em>{2t}]$​区间内的第一次相遇的时刻是</p>
<script type="math/tex; mode=display">
 t=t_{23}\left \lfloor t_{1t}\over{t_{23}}  \right \rfloor+t_{23}=t_{1t}-(t_{1t}\mod t_{23})+t_{23}</script><p> 因此可以计算出，乙丙总共会重复的次数为区间长度整除周期数，即</p>
<script type="math/tex; mode=display">
 \left \lfloor t_{2t}-[t_{1t}-(t_{1t}\mod t_{23})] \over{t_{23}}  \right \rfloor=\left \lfloor t_{2t}-t_{1t}+(t_{1t}\mod t_{23})\over{t_{23}}  \right \rfloor</script><p> 但注意到的是，这一公式有前提是假设乙丙在$t<em>{1t}$之后的第一次相遇在$t</em>{2t}$之前。因此如果没有相遇，其中的分子会小于0，该值会为负数。因此修改为（这一步似乎没有必要）</p>
<script type="math/tex; mode=display">
 \max\{\left \lfloor t_{2t}-t_{1t}+(t_{1t}\mod t_{23})\over{t_{23}}  \right \rfloor,0\}</script><p> 而在$(t<em>{1t},t</em>{2t}]$区间内，乙总共会响<code>n-t1t/t2-1</code>次，丙总共会响<code>t2t/t3-t1t/t3-1</code>次，因此区间内听到总响声$n_2$​为</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">n2=(n-t1t/t2-1)+(t2t/t3-t1t/t3-1)-max(((t2t-t1t+mod(t1t,t23))/t23),0)</span><br></pre></td></tr></table></figure>
</li>
<li><p>丙还剩下<code>n-t2t/t3-1</code>次，故</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">n3=n-t2t/t3-1</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>综上所述已经求出了在全部区间之内甲乙丙的次数，只需要编写代码即可。</p>
<p>在此之前需要做预处理，即写出<code>gcd(a,b)</code>和<code>lcm(a,b,c)</code>，其中<code>c</code>可以作为可选变元来处理。</p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">recursive</span> <span class="function"><span class="keyword">function</span></span> gcd(a,b) result(g)</span><br><span class="line">    <span class="keyword">implicit</span> <span class="keyword">none</span></span><br><span class="line">    <span class="keyword">integer</span>::a,b,g</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">mod</span>(a,b)==<span class="number">0</span>) <span class="keyword">then</span></span><br><span class="line">        g=b</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        g=gcd(b,<span class="built_in">mod</span>(a,b))</span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">if</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">recursive</span> <span class="function"><span class="keyword">function</span></span> lcm(a,b,c) result(y)</span><br><span class="line">    <span class="keyword">implicit</span> <span class="keyword">none</span></span><br><span class="line">    <span class="keyword">integer</span>::a,b,y,gcd,t0</span><br><span class="line">    <span class="keyword">integer</span>,<span class="keyword">optional</span>::c</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">present</span>(c)) <span class="keyword">then</span></span><br><span class="line">        t0=lcm(a,b)</span><br><span class="line">        y=t0*c/gcd(t0,c)</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        y=a*b/gcd(a,b)</span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">if</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>接下来便可求解。首先需要将<code>t1,t2,t3</code>排序。</p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (t1&gt;t2) <span class="keyword">then</span></span><br><span class="line">    t=t1;t1=t2;t2=t</span><br><span class="line"><span class="keyword">end</span> <span class="keyword">if</span></span><br><span class="line"><span class="keyword">if</span> (t3&lt;t1) <span class="keyword">then</span></span><br><span class="line">    t=t3;t3=t2;t2=t1;t1=t</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (t3&lt;t2) <span class="keyword">then</span></span><br><span class="line">    t=t2;t2=t3;t3=t</span><br><span class="line"><span class="keyword">end</span> <span class="keyword">if</span></span><br></pre></td></tr></table></figure>
<p>接下来求三个n，并求总n。</p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">t1t=t1*(n-<span class="number">1</span>)</span><br><span class="line">t2t=t2*(n-<span class="number">1</span>)</span><br><span class="line">t3t=t3*(n-<span class="number">1</span>)</span><br><span class="line">t12=lcm(t1,t2)</span><br><span class="line">t13=lcm(t1,t3)</span><br><span class="line">t23=lcm(t2,t3)</span><br><span class="line">t123=lcm(t1,t2,t3)</span><br><span class="line">n1=n+(t1t/t2)+(t1t/t3)-t1t/t12-t1t/t23-t1t/t13+t1t/t123</span><br><span class="line">n2=(n-t1t/t2-<span class="number">1</span>)+(t2t/t3-t1t/t3)-<span class="built_in">max</span>(((t2t-t1t+<span class="built_in">mod</span>(t1t,t23))/t23),<span class="number">0</span>)</span><br><span class="line">n3=n-t2t/t3-<span class="number">1</span></span><br><span class="line"><span class="built_in">print</span> *,n1+n2+n3</span><br></pre></td></tr></table></figure>
<p>使用该方法的完整代码如下：</p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">recursive</span> <span class="function"><span class="keyword">function</span></span> gcd(a,b) result(g)</span><br><span class="line">    <span class="keyword">implicit</span> <span class="keyword">none</span></span><br><span class="line">    <span class="keyword">integer</span>::a,b,g</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">mod</span>(a,b)==<span class="number">0</span>) <span class="keyword">then</span></span><br><span class="line">        g=b</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        g=gcd(b,<span class="built_in">mod</span>(a,b))</span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">if</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">recursive</span> <span class="function"><span class="keyword">function</span></span> lcm(a,b,c) result(y)</span><br><span class="line">    <span class="keyword">implicit</span> <span class="keyword">none</span></span><br><span class="line">    <span class="keyword">integer</span>::a,b,y,gcd,t0</span><br><span class="line">    <span class="keyword">integer</span>,<span class="keyword">optional</span>::c</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">present</span>(c)) <span class="keyword">then</span></span><br><span class="line">        t0=lcm(a,b)</span><br><span class="line">        y=t0*c/gcd(t0,c)</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        y=a*b/gcd(a,b)</span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">if</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="function"><span class="keyword">program</span></span> main</span><br><span class="line">    <span class="keyword">implicit</span> <span class="keyword">none</span></span><br><span class="line">    <span class="keyword">interface</span></span><br><span class="line">        <span class="keyword">recursive</span> <span class="function"><span class="keyword">function</span></span> lcm(a,b,c) result(y)</span><br><span class="line">            <span class="keyword">integer</span>::a,b,y,gcd,t0</span><br><span class="line">            <span class="keyword">integer</span>,<span class="keyword">optional</span>::c</span><br><span class="line">        <span class="keyword">end</span> <span class="function"><span class="keyword">function</span></span></span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">interface</span></span><br><span class="line">    <span class="keyword">integer</span>::t1,t2,t3,n,t</span><br><span class="line">    <span class="keyword">integer</span>::t1t,t2t,t3t,t12,t13,t23,t123,n1,n2,n3</span><br><span class="line">    read *,t1,t2,t3,n</span><br><span class="line">    <span class="keyword">if</span> (t1&gt;t2) <span class="keyword">then</span></span><br><span class="line">        t=t1;t1=t2;t2=t</span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">if</span></span><br><span class="line">    <span class="keyword">if</span> (t3&lt;t1) <span class="keyword">then</span></span><br><span class="line">        t=t3;t3=t2;t2=t1;t1=t</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (t3&lt;t2) <span class="keyword">then</span></span><br><span class="line">        t=t2;t2=t3;t3=t</span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">if</span></span><br><span class="line">    t1t=t1*(n-<span class="number">1</span>)</span><br><span class="line">    t2t=t2*(n-<span class="number">1</span>)</span><br><span class="line">    t3t=t3*(n-<span class="number">1</span>)</span><br><span class="line">    t12=lcm(t1,t2)</span><br><span class="line">    t13=lcm(t1,t3)</span><br><span class="line">    t23=lcm(t2,t3)</span><br><span class="line">    t123=lcm(t1,t2,t3)</span><br><span class="line">    n1=n+(t1t/t2)+(t1t/t3)-t1t/t12-t1t/t23-t1t/t13+t1t/t123</span><br><span class="line">    n2=(n-t1t/t2-<span class="number">1</span>)+(t2t/t3-t1t/t3)-<span class="built_in">max</span>(((t2t-t1t+<span class="built_in">mod</span>(t1t,t23))/t23),<span class="number">0</span>)</span><br><span class="line">    n3=n-t2t/t3-<span class="number">1</span></span><br><span class="line">    <span class="built_in">print</span> *,n1+n2+n3</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>使用动态数组进行模拟方法如下：</p>
<figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">program</span></span> main</span><br><span class="line">    <span class="keyword">implicit</span> <span class="keyword">none</span></span><br><span class="line">    <span class="keyword">integer</span>::t1,t2,t3,n,t,i,s=<span class="number">0</span></span><br><span class="line">    <span class="keyword">integer</span>,<span class="keyword">dimension</span>(:),<span class="keyword">allocatable</span>::A</span><br><span class="line">    read *,t1,t2,t3,n</span><br><span class="line">    t=<span class="built_in">max</span>(t1,t2,t3)*(n-<span class="number">1</span>)+<span class="number">1</span></span><br><span class="line">    <span class="built_in">allocate</span>(A(t))</span><br><span class="line">    A=<span class="number">0</span></span><br><span class="line">    A(<span class="number">1</span>)=<span class="number">1</span></span><br><span class="line">    A(<span class="number">1</span>:t1*n:t1)=<span class="number">1</span></span><br><span class="line">    A(<span class="number">1</span>:t2*n:t2)=<span class="number">1</span></span><br><span class="line">    A(<span class="number">1</span>:t3*n:t3)=<span class="number">1</span></span><br><span class="line">    <span class="keyword">do</span> i=<span class="number">1</span>,t</span><br><span class="line">        s=A(i)+s</span><br><span class="line">    <span class="keyword">end</span> <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">deallocate</span>(A)</span><br><span class="line">    <span class="built_in">print</span> *,s</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">! 1 2 4 4</span></span><br><span class="line"><span class="comment">!            8</span></span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="Beyond N. W. J.">BN</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://www.beyondwj.cc/2024/06/05/F90/">https://www.beyondwj.cc/2024/06/05/F90/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://www.beyondwj.cc" target="_blank">BNWJ</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/FORTRAN/">FORTRAN</a></div><div class="post-share"><div class="social-share" data-image="/img/seele_bigback.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="next-post pull-full" href="/2024/07/23/my_first_/" title="欢迎"><img class="cover" src="/img/seele.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">欢迎</div></div></a></nav><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info is-center"><div class="avatar-img"><img src="/img/seele.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">BN</div><div class="author-info-description">云间的希儿芙乐艾版</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">7</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">7</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://space.bilibili.com/486240087?spm_id_from=333.1007.0.0"><i class="fab fa-bilibili"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/BeyondWillJ" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:bnwj2023@hhu.edu.cn" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">这里是云间的希儿芙乐艾版</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8BI"><span class="toc-number">1.</span> <span class="toc-text">基本数据类型I</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B4%E5%9E%8B-integer"><span class="toc-number">2.</span> <span class="toc-text">整型 integer</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E5%9E%8B-real"><span class="toc-number">2.1.</span> <span class="toc-text">实型 real</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%8D%E5%9E%8B-complex"><span class="toc-number">2.2.</span> <span class="toc-text">复型 complex</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E5%9E%8B-character"><span class="toc-number">2.3.</span> <span class="toc-text">字符型 character</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ASCII"><span class="toc-number">2.4.</span> <span class="toc-text">ASCII</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8BII"><span class="toc-number">3.</span> <span class="toc-text">基本数据类型II</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E9%87%8F-parameter"><span class="toc-number">3.1.</span> <span class="toc-text">常量 parameter</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B4%BE%E7%94%9F-type"><span class="toc-number">3.2.</span> <span class="toc-text">派生 type</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E7%BB%84-dimension"><span class="toc-number">3.3.</span> <span class="toc-text">数组 dimension</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E8%AF%AD%E5%8F%A5"><span class="toc-number">4.</span> <span class="toc-text">基本语句</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B1%BB%E5%9E%8B%E5%A3%B0%E6%98%8E"><span class="toc-number">4.1.</span> <span class="toc-text">类型声明</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A7%8D%E5%88%AB"><span class="toc-number">4.2.</span> <span class="toc-text">种别</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%97%E6%9C%AF%E8%A1%A8%E8%BE%BE%E5%BC%8F%E4%B8%8E%E8%B5%8B%E5%80%BC"><span class="toc-number">4.3.</span> <span class="toc-text">算术表达式与赋值</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%85%E5%9C%A8%E5%87%BD%E6%95%B0"><span class="toc-number">4.4.</span> <span class="toc-text">内在函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%97%E6%9C%AF%E8%BF%90%E7%AE%97"><span class="toc-number">4.5.</span> <span class="toc-text">算术运算</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B3%E7%B3%BB%E8%A1%A8%E8%BE%BE%E5%BC%8F%E4%B8%8E%E9%80%BB%E8%BE%91%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">4.6.</span> <span class="toc-text">关系表达式与逻辑表达式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BE%93%E5%85%A5%E4%B8%8E%E8%BE%93%E5%87%BA"><span class="toc-number">4.7.</span> <span class="toc-text">输入与输出</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A1%A8%E6%8E%A7%E8%BE%93%E5%85%A5"><span class="toc-number">4.8.</span> <span class="toc-text">表控输入</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A1%A8%E6%8E%A7%E8%BE%93%E5%87%BA"><span class="toc-number">4.9.</span> <span class="toc-text">表控输出</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A0%BC%E5%BC%8F%E5%8C%96%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA"><span class="toc-number">4.10.</span> <span class="toc-text">格式化输入输出</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B4%E5%9E%8B%E7%BC%96%E8%BE%91%E7%AC%A6-r-Iw-m"><span class="toc-number">4.10.1.</span> <span class="toc-text">整型编辑符[r]Iw[.m]</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E5%9E%8B%E7%BC%96%E8%BE%91%E7%AC%A6-r-Fw-d"><span class="toc-number">4.10.2.</span> <span class="toc-text">实型编辑符[r]Fw.d</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E7%BC%96%E8%BE%91%E7%AC%A6"><span class="toc-number">4.10.3.</span> <span class="toc-text">其他编辑符</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E7%A8%8B%E5%BA%8F%E7%BB%93%E6%9E%84"><span class="toc-number">5.</span> <span class="toc-text">基本程序结构</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A8%8B%E5%BA%8F%E5%8D%95%E5%85%83"><span class="toc-number">5.1.</span> <span class="toc-text">程序单元</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BB%E7%A8%8B%E5%BA%8Fprogram"><span class="toc-number">5.2.</span> <span class="toc-text">主程序program</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%90%E7%A8%8B%E5%BA%8F"><span class="toc-number">5.3.</span> <span class="toc-text">子程序</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E5%AD%90%E7%A8%8B%E5%BA%8Ffunction"><span class="toc-number">5.3.1.</span> <span class="toc-text">函数子程序function</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%90%E4%BE%8B%E5%AD%90%E7%A8%8B%E5%BA%8Fsubroutine"><span class="toc-number">5.3.2.</span> <span class="toc-text">子例子程序subroutine</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A5%E5%8F%A3%E5%9D%97interface"><span class="toc-number">5.3.3.</span> <span class="toc-text">接口块interface</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%99%9A%E5%AE%9E%E7%BB%93%E5%90%88"><span class="toc-number">5.4.</span> <span class="toc-text">虚实结合</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97module"><span class="toc-number">5.5.</span> <span class="toc-text">模块module</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B1%BB"><span class="toc-number">5.6.</span> <span class="toc-text">类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%89%E6%8B%A9"><span class="toc-number">5.7.</span> <span class="toc-text">选择</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#if%E7%BB%93%E6%9E%84"><span class="toc-number">5.8.</span> <span class="toc-text">if结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#case%E7%BB%93%E6%9E%84"><span class="toc-number">5.9.</span> <span class="toc-text">case结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BE%AA%E7%8E%AF"><span class="toc-number">5.10.</span> <span class="toc-text">循环</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#do%E5%BE%AA%E7%8E%AF"><span class="toc-number">5.11.</span> <span class="toc-text">do循环</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9A%90%E5%BC%8Fdo%E5%BE%AA%E7%8E%AF"><span class="toc-number">5.12.</span> <span class="toc-text">隐式do循环</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%92%E5%BD%92"><span class="toc-number">5.13.</span> <span class="toc-text">递归</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%AB%98%E7%BA%A7%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">6.</span> <span class="toc-text">高级数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E7%BB%84-dimension-1"><span class="toc-number">6.1.</span> <span class="toc-text">数组 dimension</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E7%BB%B4%E6%95%B0%E7%BB%84"><span class="toc-number">6.2.</span> <span class="toc-text">一维数组</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E7%BB%B4%E6%95%B0%E7%BB%84"><span class="toc-number">6.3.</span> <span class="toc-text">二维数组</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E5%BD%A2%E5%BC%8F"><span class="toc-number">6.4.</span> <span class="toc-text">数组形式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E6%95%B0%E7%BB%84"><span class="toc-number">6.4.1.</span> <span class="toc-text">常数组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%AF%E8%B0%83%E6%95%B0%E7%BB%84"><span class="toc-number">6.4.2.</span> <span class="toc-text">可调数组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%81%87%E5%AE%9A%E5%BD%A2%E7%8A%B6%E6%95%B0%E7%BB%84"><span class="toc-number">6.4.3.</span> <span class="toc-text">假定形状数组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E6%95%B0%E7%BB%84"><span class="toc-number">6.4.4.</span> <span class="toc-text">动态数组</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E8%BF%90%E7%AE%97"><span class="toc-number">6.5.</span> <span class="toc-text">数组运算</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AD%9B%E9%80%89%E6%9C%89%E5%BA%8F%E7%BD%AE%E6%95%B0"><span class="toc-number">6.5.1.</span> <span class="toc-text">筛选有序置数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%A4%E6%8D%A2%E6%95%B0%E7%BB%84%E4%B8%A4%E8%A1%8C"><span class="toc-number">6.5.2.</span> <span class="toc-text">交换数组两行</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%92%E5%BA%8F"><span class="toc-number">6.5.3.</span> <span class="toc-text">排序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E6%89%BE"><span class="toc-number">6.5.4.</span> <span class="toc-text">查找</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9F%A9%E9%98%B5%E8%BF%90%E7%AE%97"><span class="toc-number">6.5.5.</span> <span class="toc-text">矩阵运算</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E7%9A%84%E7%A7%BB%E5%8A%A8"><span class="toc-number">6.5.6.</span> <span class="toc-text">数组的移动</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6"><span class="toc-number">6.6.</span> <span class="toc-text">字符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B4%BE%E7%94%9F"><span class="toc-number">6.7.</span> <span class="toc-text">派生</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%87%E9%92%88"><span class="toc-number">6.8.</span> <span class="toc-text">指针</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%96%87%E4%BB%B6"><span class="toc-number">7.</span> <span class="toc-text">文件</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C"><span class="toc-number">7.1.</span> <span class="toc-text">基本操作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%89%93%E5%BC%80-%E5%85%B3%E9%97%AD%E6%96%87%E4%BB%B6"><span class="toc-number">7.2.</span> <span class="toc-text">打开&#x2F;关闭文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E8%AF%BB-%E5%86%99"><span class="toc-number">7.3.</span> <span class="toc-text">文件读&#x2F;写</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C"><span class="toc-number">7.4.</span> <span class="toc-text">文件操作</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%8B%BE%E9%81%97"><span class="toc-number">8.</span> <span class="toc-text">拾遗</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/10/07/%E5%85%AC%E5%BC%8F%E6%B8%B2%E6%9F%93/" title="公式渲染"><img src="/img/seele_bigback.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="公式渲染"/></a><div class="content"><a class="title" href="/2024/10/07/%E5%85%AC%E5%BC%8F%E6%B8%B2%E6%9F%93/" title="公式渲染">公式渲染</a><time datetime="2024-10-07T07:50:00.000Z" title="发表于 2024-10-07 15:50:00">2024-10-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/10/07/%E9%AB%98%E6%96%AF%E5%9C%A8%E6%AD%A4%E9%85%92%E5%90%8E%E4%BA%86/" title="高斯在此酒后了"><img src="/img/seele_bigback.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="高斯在此酒后了"/></a><div class="content"><a class="title" href="/2024/10/07/%E9%AB%98%E6%96%AF%E5%9C%A8%E6%AD%A4%E9%85%92%E5%90%8E%E4%BA%86/" title="高斯在此酒后了">高斯在此酒后了</a><time datetime="2024-10-06T17:32:00.000Z" title="发表于 2024-10-07 01:32:00">2024-10-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/10/04/%E8%AE%BA%E7%94%9F%E5%91%BD%E4%B9%8B%E7%9F%AD%E6%9A%82/" title="论生命之短暂"><img src="/img/seele_bigback.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="论生命之短暂"/></a><div class="content"><a class="title" href="/2024/10/04/%E8%AE%BA%E7%94%9F%E5%91%BD%E4%B9%8B%E7%9F%AD%E6%9A%82/" title="论生命之短暂">论生命之短暂</a><time datetime="2024-10-04T05:07:00.000Z" title="发表于 2024-10-04 13:07:00">2024-10-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/07/28/latex%E5%85%AC%E5%BC%8F%E6%B5%8B%E8%AF%95%E6%A1%A3/" title="latex公式测试档"><img src="/img/seele_bigback.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="latex公式测试档"/></a><div class="content"><a class="title" href="/2024/07/28/latex%E5%85%AC%E5%BC%8F%E6%B5%8B%E8%AF%95%E6%A1%A3/" title="latex公式测试档">latex公式测试档</a><time datetime="2024-07-28T14:37:00.000Z" title="发表于 2024-07-28 22:37:00">2024-07-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/07/25/%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E8%87%AA%E5%86%99yaml%E7%9A%84%E7%A8%8B%E5%BA%8F/" title="一个简单的自写yaml的程序"><img src="/img/seele_bigback.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="一个简单的自写yaml的程序"/></a><div class="content"><a class="title" href="/2024/07/25/%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E8%87%AA%E5%86%99yaml%E7%9A%84%E7%A8%8B%E5%BA%8F/" title="一个简单的自写yaml的程序">一个简单的自写yaml的程序</a><time datetime="2024-07-25T09:29:00.000Z" title="发表于 2024-07-25 17:29:00">2024-07-25</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(/img/seele_bigback.png);"><div id="footer-wrap"><div class="copyright">&copy;2024 By BN</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"><script>(() => {
  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://beyondwj.netlify.app/.netlify/functions/twikoo',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://beyondwj.netlify.app/.netlify/functions/twikoo',
      region: '',
      onCommentLoaded: () => {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))

    GLOBAL_CONFIG_SITE.isPost && getCount()
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') setTimeout(init,0)
    else btf.getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(init)
  }

  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>